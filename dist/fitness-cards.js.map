{"version":3,"file":"fitness-cards.js","sources":["../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../src/styles/shared.ts","../src/utils/formatting.ts","../src/localize.ts","../src/presets.ts","../src/utils/metrics.ts","../src/utils/history.ts","../src/cards/fitness-activity-summary-card.ts","../src/cards/fitness-vitals-card.ts","../src/cards/fitness-sleep-card.ts","../src/cards/fitness-body-metrics-card.ts","../src/cards/fitness-workouts-card.ts","../src/cards/fitness-overview-card.ts","../src/utils/events.ts","../src/editors/schemas.ts","../src/editors/fitness-activity-summary-card-editor.ts","../src/editors/fitness-vitals-card-editor.ts","../src/editors/fitness-sleep-card-editor.ts","../src/editors/fitness-body-metrics-card-editor.ts","../src/editors/fitness-workouts-card-editor.ts","../src/editors/fitness-overview-card-editor.ts","../src/utils/metric-catalog.ts","../src/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i,e=!1,h){if(void 0!==t){const r=this.constructor;if(!1===e&&(h=this[t]),i??=r.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.2\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t=>t,s=t.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,h=\"$lit$\",o=`lit$${Math.random().toFixed(9).slice(2)}$`,n=\"?\"+o,r=`<${n}>`,l=document,c=()=>l.createComment(\"\"),a=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,d=t=>u(t)||\"function\"==typeof t?.[Symbol.iterator],f=\"[ \\t\\n\\f\\r]\",v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${f}(?:([^\\\\s\"'>=/]+)(${f}*=${f}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,x=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),b=x(1),w=x(2),T=x(3),E=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),C=new WeakMap,P=l.createTreeWalker(l,129);function V(t,i){if(!u(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const N=(t,i)=>{const s=t.length-1,e=[];let n,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=v;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,f=0;for(;f<s.length&&(c.lastIndex=f,u=c.exec(s),null!==u);)f=c.lastIndex,c===v?\"!--\"===u[1]?c=_:void 0!==u[1]?c=m:void 0!==u[2]?(y.test(u[2])&&(n=RegExp(\"</\"+u[2],\"g\")),c=p):void 0!==u[3]&&(c=p):c===p?\">\"===u[0]?(c=n??v,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?p:'\"'===u[3]?$:g):c===$||c===g?c=p:c===_||c===m?c=v:(c=p,n=void 0);const x=c===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===v?s+r:d>=0?(e.push(a),s.slice(0,d)+h+s.slice(d)+o+x):s+o+(-2===d?i:x)}return[V(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),e]};class S{constructor({strings:t,_$litType$:i},e){let r;this.parts=[];let l=0,a=0;const u=t.length-1,d=this.parts,[f,v]=N(t,i);if(this.el=S.createElement(f,e),P.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(h)){const i=v[a++],s=r.getAttribute(t).split(o),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:l,name:e[2],strings:s,ctor:\".\"===e[1]?I:\"?\"===e[1]?L:\"@\"===e[1]?z:H}),r.removeAttribute(t)}else t.startsWith(o)&&(d.push({type:6,index:l}),r.removeAttribute(t));if(y.test(r.tagName)){const t=r.textContent.split(o),i=t.length-1;if(i>0){r.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)r.append(t[s],c()),P.nextNode(),d.push({type:2,index:++l});r.append(t[i],c())}}}else if(8===r.nodeType)if(r.data===n)d.push({type:2,index:l});else{let t=-1;for(;-1!==(t=r.data.indexOf(o,t+1));)d.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function M(t,i,s=t,e){if(i===E)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=a(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=M(t,h._$AS(t,i.values),h,e)),i}class R{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??l).importNode(i,!0);P.currentNode=e;let h=P.nextNode(),o=0,n=0,r=s[0];for(;void 0!==r;){if(o===r.index){let i;2===r.type?i=new k(h,h.nextSibling,this,t):1===r.type?i=new r.ctor(h,r.name,r.strings,this,t):6===r.type&&(i=new Z(h,this,t)),this._$AV.push(i),r=s[++n]}o!==r?.index&&(h=P.nextNode(),o++)}return P.currentNode=l,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=M(this,t,i),a(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==E&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&a(this._$AH)?this._$AA.nextSibling.data=t:this.T(l.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=S.createElement(V(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new R(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=C.get(t.strings);return void 0===i&&C.set(t.strings,i=new S(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new k(this.O(c()),this.O(c()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=i(t).nextSibling;i(t).remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class H{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=M(this,t,i,0),o=!a(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=M(this,e[s+n],i,n),r===E&&(r=this._$AH[n]),o||=!a(r)||r!==this._$AH[n],r===A?t=A:t!==A&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class I extends H{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends H{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class z extends H{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=M(this,t,i,0)??A)===E)return;const s=this._$AH,e=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==A&&(s===A||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const j={M:h,P:o,A:n,C:1,L:N,R,D:d,V:M,I:k,H,N:L,U:z,B:I,F:Z},B=t.litHtmlPolyfillSupport;B?.(S,k),(t.litHtmlVersions??=[]).push(\"3.3.2\");const D=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new k(i.insertBefore(c(),t),t,void 0,s??{})}return h._$AI(t),h};export{j as _$LH,b as html,T as mathml,E as noChange,A as nothing,D as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.2\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{notEqual as t,defaultConverter as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:t},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t,!0,r)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t,!0,r)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import { css } from \"lit\";\n\nexport const cardStyles = css`\n  :host {\n    display: block;\n  }\n\n  .chip {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 8px 10px;\n    border-radius: 999px;\n    background: var(\n      --ha-chip-background,\n      color-mix(in srgb, var(--card-background-color, #111) 70%, transparent)\n    );\n    color: var(--primary-text-color);\n    font-size: 0.9rem;\n  }\n\n  .mini-row {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 10px;\n    border-radius: 10px;\n    background: var(\n      --ha-card-section-background,\n      color-mix(\n        in srgb,\n        var(--card-background-color, var(--ha-card-background, #1e1e1e)) 70%,\n        var(--secondary-background-color, rgba(0, 0, 0, 0.04))\n      )\n    );\n  }\n\n  ha-card {\n    padding: var(--ha-card-padding, 16px);\n    background: var(\n      --ha-card-background,\n      var(--card-background-color, var(--primary-background-color))\n    );\n    color: var(--primary-text-color);\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 12px;\n    gap: 8px;\n  }\n\n  .title {\n    font-size: 1.1rem;\n    font-weight: 700;\n  }\n\n  .metric-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n    gap: 12px;\n  }\n\n  .metric {\n    border-radius: 12px;\n    padding: 12px;\n    background: var(\n      --ha-card-section-background,\n      color-mix(\n        in srgb,\n        var(--card-background-color, var(--ha-card-background, #1e1e1e)) 70%,\n        var(--secondary-background-color, rgba(0, 0, 0, 0.04))\n      )\n    );\n    box-shadow: var(--ha-card-box-shadow, none);\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .metric.compact {\n    padding: 10px;\n  }\n\n  .metric .label {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    color: var(--secondary-text-color);\n    font-size: 0.9rem;\n    text-transform: none;\n  }\n\n  .metric .value {\n    font-size: 1.6rem;\n    font-weight: 700;\n    line-height: 1.2;\n  }\n\n  .metric .subtle {\n    color: var(--secondary-text-color);\n    font-size: 0.85rem;\n  }\n\n  .progress {\n    height: 6px;\n    border-radius: 999px;\n    background: var(--divider-color, rgba(128, 128, 128, 0.25));\n    overflow: hidden;\n  }\n\n  .progress .bar {\n    height: 100%;\n    border-radius: 999px;\n    background: var(--accent-color, var(--primary-color));\n    width: 0%;\n    transition: width 0.3s ease;\n  }\n\n  .status-low {\n    color: var(--warning-color, #f9a825);\n  }\n\n  .status-high {\n    color: var(--error-color, #ef5350);\n  }\n\n  .status-normal {\n    color: var(--success-color, var(--primary-color));\n  }\n\n  .pill {\n    padding: 3px 8px;\n    border-radius: 999px;\n    background: color-mix(\n      in srgb,\n      var(--accent-color, var(--primary-color)) 15%,\n      transparent\n    );\n    color: var(--accent-color, var(--primary-color));\n    font-size: 0.75rem;\n    font-weight: 600;\n  }\n`;\n","import { HassEntity, HomeAssistant, MetricConfig, RangeBand, RangeConfig } from \"../types\";\n\nconst UNAVAILABLE_STATES = new Set([\n  \"unknown\",\n  \"unavailable\",\n  \"none\",\n  \"null\",\n  \"nan\",\n  \"\"\n]);\n\nexport function parseNumber(value?: string | number | null): number | null {\n  if (value === null || value === undefined) return null;\n  const asString = String(value).trim();\n  if (UNAVAILABLE_STATES.has(asString)) return null;\n  const parsed = Number(asString);\n  return Number.isFinite(parsed) ? parsed : null;\n}\n\nexport function defaultDecimals(unit?: string): number {\n  switch (unit) {\n    case \"bpm\":\n    case \"breaths/min\":\n    case \"count\":\n    case \"kcal\":\n    case \"ms\":\n    case \"mg/dL\":\n    case \"s\":\n      return 0;\n    case \"%\":\n      return 1;\n    case \"lb\":\n    case \"fl oz US\":\n      return 1;\n    case \"mi\":\n      return 2;\n    case \"mL/(kg*min)\":\n      return 1;\n    default:\n      return 1;\n  }\n}\n\nfunction formatSeconds(value: number): string {\n  if (value >= 3600) {\n    const hours = Math.floor(value / 3600);\n    const minutes = Math.floor((value % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  }\n  if (value >= 90) {\n    const minutes = Math.floor(value / 60);\n    const seconds = Math.round(value % 60);\n    return `${minutes}m ${seconds}s`;\n  }\n  return `${Math.round(value)}s`;\n}\n\nexport function formatMinutes(value: number): string {\n  if (value >= 90) {\n    const hours = Math.floor(value / 60);\n    const minutes = Math.round(value % 60);\n    return `${hours}h ${minutes}m`;\n  }\n  const decimals = value >= 10 ? 0 : 1;\n  return `${value.toFixed(decimals)} min`;\n}\n\nexport function formatValue(\n  value: number | null,\n  unit?: string,\n  decimals?: number,\n  unitOverride?: string\n): string {\n  if (value === null || value === undefined || Number.isNaN(value)) {\n    return \"—\";\n  }\n\n  const displayUnit = unitOverride ?? unit;\n  if (unit === \"min\") {\n    return formatMinutes(value);\n  }\n  if (unit === \"s\") {\n    return formatSeconds(value);\n  }\n\n  const precision = decimals ?? defaultDecimals(unit);\n  const rounded = value.toFixed(precision);\n  return displayUnit ? `${rounded} ${displayUnit}` : rounded;\n}\n\nexport function formatTrend(diff: number | null, unit?: string, decimals?: number): string {\n  if (diff === null || Number.isNaN(diff)) return \"—\";\n  const prefix = diff > 0 ? \"+\" : \"\";\n  const precision = decimals ?? defaultDecimals(unit);\n  const rounded = diff.toFixed(precision);\n  return unit ? `${prefix}${rounded} ${unit}` : `${prefix}${rounded}`;\n}\n\nexport function goalValue(metric: MetricConfig, hass?: HomeAssistant): number | undefined {\n  if (!hass) return typeof metric.goal === \"number\" ? metric.goal : undefined;\n  if (typeof metric.goal === \"number\") return metric.goal;\n  if (metric.goal_entity) {\n    const goalState = hass.states?.[metric.goal_entity];\n    const parsed = parseNumber(goalState?.state);\n    if (parsed !== null) return parsed;\n  }\n  if (metric.goal && typeof metric.goal === \"object\" && \"entity\" in metric.goal) {\n    const goalState = hass.states?.[metric.goal.entity];\n    const parsed = parseNumber(goalState?.state);\n    if (parsed !== null) return parsed;\n  }\n  return undefined;\n}\n\nexport function progressPercent(value: number | null, goal?: number): number | null {\n  if (value === null || goal === undefined || goal === 0) return null;\n  return Math.min(Math.round((value / goal) * 100), 999);\n}\n\nfunction asRangeConfig(ranges?: RangeConfig | RangeBand[]): RangeConfig | undefined {\n  if (!ranges) return undefined;\n  if (Array.isArray(ranges)) {\n    return { bands: ranges };\n  }\n  return ranges;\n}\n\nexport function evaluateRange(\n  value: number | null,\n  ranges?: RangeConfig | RangeBand[]\n): { status?: \"low\" | \"normal\" | \"high\" | \"band\"; band?: RangeBand } {\n  if (value === null || ranges === undefined) return {};\n  const normalized = asRangeConfig(ranges);\n  if (!normalized) return {};\n\n  if (normalized.bands && normalized.bands.length) {\n    const hit = normalized.bands.find(\n      (band) =>\n        (band.min === undefined || value >= band.min) &&\n        (band.max === undefined || value <= band.max)\n    );\n    return hit ? { status: \"band\", band: hit } : {};\n  }\n\n  const { low, normal, high } = normalized;\n  if (low !== undefined && value < low) return { status: \"low\" };\n  if (high !== undefined && value > high) return { status: \"high\" };\n  if (Array.isArray(normal)) {\n    if (\n      (normal[0] === undefined || value >= normal[0]) &&\n      (normal[1] === undefined || value <= normal[1])\n    ) {\n      return { status: \"normal\" };\n    }\n  } else if (typeof normal === \"number\" && value === normal) {\n    return { status: \"normal\" };\n  } else if (low !== undefined || high !== undefined) {\n    return { status: \"normal\" };\n  }\n  return {};\n}\n\nexport function extractValue(entity: HassEntity | undefined): number | null {\n  if (!entity) return null;\n  return parseNumber(entity.state);\n}\n\nexport function metricDisplay(\n  hass: HomeAssistant | undefined,\n  metric: MetricConfig\n): { value: number | null; unit?: string; text: string; entity?: HassEntity } {\n  const entityId = metric.entity ?? \"\";\n  const entity = entityId ? hass?.states?.[entityId] : undefined;\n  const unit = metric.unit_override ?? entity?.attributes?.unit_of_measurement;\n  const value = extractValue(entity);\n  const text = formatValue(value, unit, metric.decimals, metric.unit_override);\n  return { value, unit, text, entity };\n}\n\nexport function guessMetricName(metric: MetricConfig, entity?: HassEntity): string {\n  return (\n    metric.name ||\n    entity?.attributes?.friendly_name ||\n    (metric.entity ? metric.entity.split(\".\").slice(1).join(\".\") : \"Metric\")\n  );\n}\n","import en from \"../languages/en.json\";\nimport es from \"../languages/es.json\";\n\ntype LanguageMap = Record<string, string>;\n\nconst languages: Record<string, LanguageMap> = {\n  en,\n  es\n};\n\nfunction pickLanguage(language?: string): LanguageMap {\n  if (!language) return languages.en;\n  const normalized = language.split(\"-\")[0];\n  return languages[normalized] || languages.en;\n}\n\nexport function localize(key: string, language?: string, vars?: Record<string, string | number>): string {\n  const strings = pickLanguage(language);\n  const base = strings[key] ?? languages.en[key] ?? key;\n  if (!vars) return base;\n  return Object.entries(vars).reduce(\n    (acc, [token, value]) => acc.replace(`{${token}}`, String(value)),\n    base\n  );\n}\n\nexport function computeLocalize(hass?: any) {\n  const language = hass?.locale?.language || hass?.language;\n  return (key: string, vars?: Record<string, string | number>) => localize(key, language, vars);\n}\n","import { MetricConfig, RangeConfig } from \"./types\";\n\nexport interface MetricPreset {\n  id: string;\n  name: string;\n  icon: string;\n  unit?: string;\n  decimals?: number;\n  ranges?: RangeConfig;\n}\n\ntype PresetGroup = Record<string, MetricPreset>;\n\nexport const metricPresets: PresetGroup = {\n  steps: { id: \"steps\", name: \"Steps\", icon: \"mdi:shoe-print\", unit: \"count\", decimals: 0 },\n  active_energy: { id: \"active_energy\", name: \"Active Energy\", icon: \"mdi:fire\", unit: \"kcal\", decimals: 0 },\n  distance_walk_run: { id: \"distance_walk_run\", name: \"Walk/Run Distance\", icon: \"mdi:walk\", unit: \"mi\", decimals: 2 },\n  flights_climbed: { id: \"flights_climbed\", name: \"Flights Climbed\", icon: \"mdi:stairs-up\", unit: \"count\", decimals: 0 },\n\n  heart_rate: { id: \"heart_rate\", name: \"Heart Rate\", icon: \"mdi:heart-pulse\", unit: \"bpm\", decimals: 0, ranges: { low: 50, normal: [55, 95], high: 120 } },\n  resting_heart_rate: { id: \"resting_heart_rate\", name: \"Resting HR\", icon: \"mdi:heart\", unit: \"bpm\", decimals: 0, ranges: { low: 45, normal: [50, 90], high: 110 } },\n  hrv_sdnn: { id: \"hrv_sdnn\", name: \"HRV (SDNN)\", icon: \"mdi:heart-flash\", unit: \"ms\", decimals: 0, ranges: { low: 20 } },\n  spo2: { id: \"spo2\", name: \"SpO2\", icon: \"mdi:water-percent\", unit: \"%\", decimals: 1, ranges: { low: 92, normal: [95, 100] } },\n  respiratory_rate: { id: \"respiratory_rate\", name: \"Respiratory Rate\", icon: \"mdi:lungs\", unit: \"breaths/min\", decimals: 0, ranges: { low: 10, normal: [12, 20], high: 24 } },\n\n  asleep: { id: \"asleep\", name: \"Asleep\", icon: \"mdi:sleep\", unit: \"min\", decimals: 0 },\n  in_bed: { id: \"in_bed\", name: \"In bed\", icon: \"mdi:bed\", unit: \"min\", decimals: 0 },\n  sleep_core: { id: \"sleep_core\", name: \"Core\", icon: \"mdi:alpha-c-circle\", unit: \"min\", decimals: 0 },\n  sleep_deep: { id: \"sleep_deep\", name: \"Deep\", icon: \"mdi:alpha-d-circle\", unit: \"min\", decimals: 0 },\n  sleep_rem: { id: \"sleep_rem\", name: \"REM\", icon: \"mdi:alpha-r-circle\", unit: \"min\", decimals: 0 },\n  sleep_unknown: { id: \"sleep_unknown\", name: \"Unknown\", icon: \"mdi:help-circle-outline\", unit: \"min\", decimals: 0 },\n\n  weight: { id: \"weight\", name: \"Weight\", icon: \"mdi:scale-bathroom\", unit: \"lb\", decimals: 1 },\n  bmi: { id: \"bmi\", name: \"BMI\", icon: \"mdi:human-male-height\", unit: \"count\", decimals: 1 },\n  body_fat_percentage: { id: \"body_fat_percentage\", name: \"Body Fat\", icon: \"mdi:percent\", unit: \"%\", decimals: 1 },\n  lean_body_mass: { id: \"lean_body_mass\", name: \"Lean Mass\", icon: \"mdi:human\", unit: \"lb\", decimals: 1 },\n  vo2_max: { id: \"vo2_max\", name: \"VO2 Max\", icon: \"mdi:run\", unit: \"mL/(kg*min)\", decimals: 1 },\n\n  workout_cycling: { id: \"workout_cycling\", name: \"Cycling\", icon: \"mdi:bike\" },\n  workout_walking: { id: \"workout_walking\", name: \"Walking\", icon: \"mdi:walk\" },\n  workout_strength_training: { id: \"workout_strength_training\", name: \"Strength Training\", icon: \"mdi:weight-lifter\" },\n  workout_functional_strength: { id: \"workout_functional_strength\", name: \"Functional Strength\", icon: \"mdi:arm-flex\" },\n  workout_hiit: { id: \"workout_hiit\", name: \"HIIT\", icon: \"mdi:lightning-bolt\" },\n  workout_generic: { id: \"workout_generic\", name: \"Workout\", icon: \"mdi:arm-flex-outline\" }\n};\n\nexport const cardPresets: Record<string, MetricConfig[]> = {\n  activity: [\n    { preset: \"active_energy\" },\n    { preset: \"steps\" },\n    { preset: \"distance_walk_run\" },\n    { preset: \"flights_climbed\" }\n  ],\n  vitals: [\n    { preset: \"heart_rate\" },\n    { preset: \"resting_heart_rate\" },\n    { preset: \"hrv_sdnn\" },\n    { preset: \"spo2\" },\n    { preset: \"respiratory_rate\" }\n  ],\n  sleep: [\n    { preset: \"asleep\", stage: \"asleep\" },\n    { preset: \"in_bed\", stage: \"in_bed\" },\n    { preset: \"sleep_core\", stage: \"core\" },\n    { preset: \"sleep_deep\", stage: \"deep\" },\n    { preset: \"sleep_rem\", stage: \"rem\" },\n    { preset: \"sleep_unknown\", stage: \"unknown\" }\n  ],\n  body: [\n    { preset: \"weight\" },\n    { preset: \"bmi\" },\n    { preset: \"body_fat_percentage\" },\n    { preset: \"lean_body_mass\" },\n    { preset: \"vo2_max\" }\n  ],\n  workouts: [],\n  overview: []\n};\n\nexport function applyMetricPreset(metric: MetricConfig): MetricConfig {\n  if (!metric.preset) return metric;\n  const preset = metricPresets[metric.preset];\n  if (!preset) return metric;\n  return {\n    ...preset,\n    ...metric,\n    name: metric.name ?? preset.name,\n    icon: metric.icon ?? preset.icon,\n    unit_override: metric.unit_override ?? preset.unit,\n    decimals: metric.decimals ?? preset.decimals,\n    ranges: metric.ranges ?? preset.ranges\n  };\n}\n","import { MetricConfig, Period } from \"../types\";\nimport { applyMetricPreset, cardPresets } from \"../presets\";\n\nexport function normalizeMetrics(metrics: MetricConfig[] = [], preset?: string): MetricConfig[] {\n  if (metrics.length === 0 && preset && cardPresets[preset]) {\n    metrics = cardPresets[preset].map((m) => ({ ...m }));\n  }\n  return metrics.map((metric) => applyMetricPreset(metric));\n}\n\nexport function getPeriod(configPeriod?: Period): Period {\n  return configPeriod ?? \"current\";\n}\n","import { HassEntity, HomeAssistant, Period } from \"../types\";\nimport { parseNumber } from \"./formatting\";\n\ninterface HistoryEntry {\n  state: string;\n  last_changed: string;\n}\n\ntype HistoryResponse = HistoryEntry[][];\n\nconst cache = new Map<string, { ts: number; value: number | null }>();\nconst CACHE_MS = 30_000;\n\nfunction buildKey(entityId: string, start: Date, end: Date) {\n  return `${entityId}-${start.toISOString()}-${end.toISOString()}`;\n}\n\nasync function fetchHistory(\n  hass: HomeAssistant,\n  entityId: string,\n  start: Date,\n  end: Date\n): Promise<number | null> {\n  const key = buildKey(entityId, start, end);\n  const now = Date.now();\n  const cached = cache.get(key);\n  if (cached && now - cached.ts < CACHE_MS) return cached.value;\n\n  try {\n    const path = `history/period/${start.toISOString()}?filter_entity_id=${entityId}&end_time=${end.toISOString()}&minimal_response`;\n    // @ts-ignore hass.callApi is provided by HA\n    const response: HistoryResponse = await hass.callApi(\"GET\", path);\n    const series = Array.isArray(response) ? response[0] : undefined;\n    if (!series || !series.length) {\n      cache.set(key, { ts: now, value: null });\n      return null;\n    }\n    const latest = [...series].reverse().find((item) => parseNumber(item.state) !== null);\n    const parsed = latest ? parseNumber(latest.state) : null;\n    cache.set(key, { ts: now, value: parsed });\n    return parsed;\n  } catch (error) {\n    cache.set(key, { ts: now, value: null });\n    return null;\n  }\n}\n\nfunction windowForPeriod(period: Period): { start: Date; end: Date; prevStart: Date; prevEnd: Date } {\n  const end = new Date();\n  const start = new Date();\n  if (period === \"today\") {\n    start.setHours(0, 0, 0, 0);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 1);\n    const prevEnd = new Date(start);\n    return { start, end, prevStart, prevEnd };\n  }\n  if (period === \"7d\") {\n    start.setDate(start.getDate() - 7);\n    const prevEnd = new Date(start);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 7);\n    return { start, end, prevStart, prevEnd };\n  }\n  if (period === \"30d\") {\n    start.setDate(start.getDate() - 30);\n    const prevEnd = new Date(start);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 30);\n    return { start, end, prevStart, prevEnd };\n  }\n  const prevEnd = new Date();\n  const prevStart = new Date(prevEnd.getTime() - 30 * 60 * 1000);\n  return { start, end, prevStart, prevEnd };\n}\n\nexport interface TrendResult {\n  current: number | null;\n  previous: number | null;\n  diff: number | null;\n  label: string;\n}\n\nexport async function computeTrend(\n  hass: HomeAssistant | undefined,\n  entityId: string | undefined,\n  period: Period\n): Promise<TrendResult> {\n  if (!hass || !entityId) {\n    return { current: null, previous: null, diff: null, label: period };\n  }\n  const { start, end, prevStart, prevEnd } = windowForPeriod(period);\n  const current = await fetchHistory(hass, entityId, start, end);\n  const previous = await fetchHistory(hass, entityId, prevStart, prevEnd);\n  const diff = current !== null && previous !== null ? current - previous : null;\n  return { current, previous, diff, label: period };\n}\n\nexport function previousFromEntity(entity?: HassEntity): number | null {\n  if (!entity) return null;\n  const candidates = [\n    entity.attributes?.previous_state,\n    entity.attributes?.previous,\n    entity.attributes?.last_value,\n    entity.attributes?.prior_value\n  ];\n  for (const candidate of candidates) {\n    const parsed = parseNumber(candidate);\n    if (parsed !== null) return parsed;\n  }\n  return null;\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig, Period } from \"../types\";\nimport {\n  goalValue,\n  guessMetricName,\n  metricDisplay,\n  progressPercent,\n  formatTrend\n} from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult } from \"../utils/history\";\n\n@customElement(\"fitness-activity-summary-card\")\nexport class FitnessActivitySummaryCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .metric {\n        position: relative;\n      }\n      .goal-row {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 6px;\n      }\n      .progress-label {\n        font-size: 0.8rem;\n        color: var(--secondary-text-color);\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-activity-summary-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with at least one entry\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        const trendEntityId = metric.trend_entity ?? entityId;\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        if (period === \"current\") {\n          const currentVal = entity ? Number(entity.state) : null;\n          const previous = metric.trend_entity\n            ? previousFromEntity(this.hass?.states?.[metric.trend_entity])\n            : previousFromEntity(entity);\n          trendMap[entityId] = {\n            current: currentVal,\n            previous,\n            diff: currentVal !== null && previous !== null ? currentVal - previous : null,\n            label: period\n          };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, trendEntityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    const period = getPeriod(this.config?.period);\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${this.localize(`label.period.${period}`)}):\n      ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const goal = goalValue(metric, this.hass);\n    const progress = progressPercent(value, goal);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n        </div>\n        <div class=\"value\">${text}</div>\n        ${this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n        ${goal !== undefined && progress !== null\n          ? html`\n              <div class=\"goal-row\">\n                <span class=\"progress-label\">${progress}% of goal</span>\n                <span class=\"progress-label\">${this.localize(\"label.goal\")}: ${goal}</span>\n              </div>\n              <div class=\"progress\">\n                <div class=\"bar\" style=\"width: ${Math.min(progress, 100)}%\"></div>\n              </div>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">\n            ${this.config.title ?? this.localize(\"card.activity_title\")}\n          </div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig, RangeConfig } from \"../types\";\nimport { evaluateRange, formatTrend, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult } from \"../utils/history\";\n\n@customElement(\"fitness-vitals-card\")\nexport class FitnessVitalsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .metric {\n        position: relative;\n      }\n      .status-chip {\n        align-self: flex-start;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-vitals-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with at least one entry\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? parseNumber(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    const period = getPeriod(this.config?.period);\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${this.localize(`label.period.${period}`)}):\n      ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private defaultRanges(metric: MetricConfig, name: string): RangeConfig | undefined {\n    const lowered = name.toLowerCase();\n    if (lowered.includes(\"oxygen\") || lowered.includes(\"spo2\")) {\n      return { low: 92, normal: [95, 100] };\n    }\n    if (lowered.includes(\"respiratory\")) {\n      return { low: 10, high: 24, normal: [12, 20] };\n    }\n    if (lowered.includes(\"resting\") || lowered.includes(\"heart rate\")) {\n      return { low: 45, high: 110, normal: [55, 95] };\n    }\n    if (lowered.includes(\"variability\") || lowered.includes(\"hrv\")) {\n      return { low: 15, normal: [20, 150] };\n    }\n    if (lowered.includes(\"glucose\")) {\n      return { low: 70, high: 180, normal: [80, 140] };\n    }\n    return metric.ranges as RangeConfig | undefined;\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const ranges = metric.ranges ?? this.defaultRanges(metric, name);\n    const { status, band } = evaluateRange(value, ranges);\n\n    const statusLabel =\n      band?.label ??\n      (status === \"low\"\n        ? this.localize(\"label.low\")\n        : status === \"high\"\n          ? this.localize(\"label.high\")\n          : status === \"normal\"\n            ? this.localize(\"label.ok\")\n            : \"\");\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n          ${statusLabel\n            ? html`<span class=\"pill status-${status ?? \"normal\"} status-chip\">${statusLabel}</span>`\n            : nothing}\n        </div>\n        <div class=\"value status-${status ?? \"normal\"}\">${text}</div>\n        ${this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n        ${band?.min !== undefined || band?.max !== undefined\n          ? html`<div class=\"subtle\">\n              ${band.min !== undefined ? `≥ ${band.min}` : \"\"} ${band.max !== undefined\n                ? `≤ ${band.max}`\n                : \"\"}\n            </div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.vitals_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig } from \"../types\";\nimport { formatMinutes, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics } from \"../utils/metrics\";\n\ntype SleepStage = \"asleep\" | \"in_bed\" | \"core\" | \"deep\" | \"rem\" | \"unknown\";\n\nconst STAGE_COLORS: Record<SleepStage, string> = {\n  asleep: \"var(--primary-color)\",\n  in_bed: \"var(--secondary-text-color)\",\n  core: \"var(--accent-color, #5c7cfa)\",\n  deep: \"var(--success-color, #4caf50)\",\n  rem: \"var(--warning-color, #f9a825)\",\n  unknown: \"var(--divider-color, #888)\"\n};\n\n@customElement(\"fitness-sleep-card\")\nexport class FitnessSleepCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n\n  static styles = [\n    cardStyles,\n    css`\n      .summary {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n        gap: 8px;\n        margin-bottom: 8px;\n      }\n      .stage-bar {\n        height: 12px;\n        border-radius: 999px;\n        background: var(--divider-color, rgba(128, 128, 128, 0.3));\n        overflow: hidden;\n        display: flex;\n        margin: 8px 0;\n      }\n      .stage-segment {\n        height: 100%;\n      }\n      .stage-legend {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n        gap: 6px;\n      }\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .swatch {\n        width: 12px;\n        height: 12px;\n        border-radius: 3px;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-sleep-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with sleep stages\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  private stageFromMetric(metric: MetricConfig): SleepStage {\n    if (metric.stage) return metric.stage;\n    const id = (metric.entity ?? \"\").toLowerCase();\n    if (id.includes(\"in_bed\")) return \"in_bed\";\n    if (id.includes(\"sleep_core\")) return \"core\";\n    if (id.includes(\"sleep_deep\")) return \"deep\";\n    if (id.includes(\"sleep_rem\")) return \"rem\";\n    if (id.includes(\"sleep_unknown\")) return \"unknown\";\n    if (id.includes(\"sleep_asleep\")) return \"asleep\";\n    return \"asleep\";\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    const durations: Partial<Record<SleepStage, number>> = {};\n\n    this.config.metrics.forEach((metric) => {\n      const entityId = metric.entity ?? \"\";\n      const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n      const val = parseNumber(entity?.state);\n      if (val === null) return;\n      const stage = this.stageFromMetric(metric);\n      durations[stage] = val;\n    });\n\n    const stageOrder: SleepStage[] = [\"core\", \"deep\", \"rem\", \"unknown\"];\n    const asleepValue =\n      durations.asleep ??\n      stageOrder.reduce((sum, key) => sum + (durations[key] ?? 0), 0);\n    const inBedValue = durations.in_bed ?? asleepValue;\n    const totalForBreakdown = stageOrder.reduce((sum, key) => sum + (durations[key] ?? 0), 0);\n\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.sleep_title\")}</div>\n          ${this.config?.period\n            ? html`<div class=\"subtle\">\n                ${this.localize(`label.period.${this.config.period}`) || this.config.period}\n              </div>`\n            : nothing}\n        </div>\n        <div class=\"summary\">\n          <div>\n            <div class=\"label\">${this.localize(\"label.asleep\")}</div>\n            <div class=\"value\">${asleepValue !== undefined ? formatMinutes(asleepValue) : \"—\"}</div>\n          </div>\n          <div>\n            <div class=\"label\">${this.localize(\"label.in_bed\")}</div>\n            <div class=\"value\">${inBedValue !== undefined ? formatMinutes(inBedValue) : \"—\"}</div>\n          </div>\n        </div>\n        <div class=\"stage-bar\">\n          ${stageOrder\n            .filter((stage) => (durations[stage] ?? 0) > 0)\n            .map((stage) => {\n              const val = durations[stage] ?? 0;\n              const pct = totalForBreakdown > 0 ? (val / totalForBreakdown) * 100 : 0;\n              return html`<div\n                class=\"stage-segment\"\n                style=\"width: ${pct}%; background: ${STAGE_COLORS[stage]}\"\n              ></div>`;\n            })}\n        </div>\n        <div class=\"stage-legend\">\n          ${stageOrder.map((stage) => {\n            const val = durations[stage];\n            const name = this.localize(`label.${stage}`) || stage.toUpperCase();\n            return html`<div class=\"legend-item\">\n              <span class=\"swatch\" style=\"background:${STAGE_COLORS[stage]}\"></span>\n              <div>\n                <div class=\"label\">${name}</div>\n                <div class=\"subtle\">\n                  ${val !== undefined && val !== null ? formatMinutes(val) : \"—\"}\n                </div>\n              </div>\n            </div>`;\n          })}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig } from \"../types\";\nimport { formatTrend, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult } from \"../utils/history\";\n\n@customElement(\"fitness-body-metrics-card\")\nexport class FitnessBodyMetricsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .trend {\n        display: inline-flex;\n        align-items: center;\n        gap: 4px;\n        font-size: 0.85rem;\n        color: var(--secondary-text-color);\n      }\n      .trend.up {\n        color: var(--success-color, var(--primary-color));\n      }\n      .trend.down {\n        color: var(--error-color, #ef5350);\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-body-metrics-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with body metrics\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? parseNumber(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private previousValue(entity?: any): number | null {\n    return previousFromEntity(entity);\n  }\n\n  private trendIcon(diff: number): string {\n    if (diff > 0) return \"mdi:arrow-up-bold\";\n    if (diff < 0) return \"mdi:arrow-down-bold\";\n    return \"mdi:minus\";\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const trend = this.trends[metric.entity ?? \"\"];\n    const previous = this.previousValue(entity);\n    const diff =\n      trend?.diff !== undefined\n        ? trend.diff\n        : value !== null && previous !== null\n          ? value - previous\n          : null;\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n        </div>\n        <div class=\"value\">${text}</div>\n        <div class=\"subtle\">\n          ${diff !== null\n            ? html`<span class=\"trend ${diff > 0 ? \"up\" : diff < 0 ? \"down\" : \"\"}\">\n                <ha-icon .icon=${this.trendIcon(diff)}></ha-icon>\n                ${formatTrend(diff, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n              </span>`\n            : html`<span class=\"trend\">${this.localize(\"label.no_previous\")}</span>`}\n        </div>\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.body_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config?.period)}`)}</div>\n        </div>\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { HomeAssistant, WorkoutsCardConfig, WorkoutMetricConfig, Period } from \"../types\";\nimport { computeLocalize } from \"../localize\";\nimport { formatMinutes, formatValue, parseNumber } from \"../utils/formatting\";\nimport { getPeriod } from \"../utils/metrics\";\n\ninterface WorkoutValues {\n  duration: number | null;\n  energy: number | null;\n  distance: number | null;\n}\n\n@customElement(\"fitness-workouts-card\")\nexport class FitnessWorkoutsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: WorkoutsCardConfig;\n\n  static styles = [\n    cardStyles,\n    css`\n      .workout-list {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n      }\n      .row {\n        display: grid;\n        grid-template-columns: 1fr repeat(3, minmax(70px, 100px));\n        gap: 10px;\n        align-items: center;\n      }\n      .header-row {\n        font-weight: 700;\n        color: var(--secondary-text-color);\n      }\n      .total {\n        font-weight: 700;\n      }\n      .value {\n        text-align: right;\n      }\n      .compact .row {\n        grid-template-columns: 1fr repeat(2, minmax(60px, 80px));\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-workouts-card-editor\");\n  }\n\n  public setConfig(config: WorkoutsCardConfig): void {\n    if (!config.workouts || !Array.isArray(config.workouts) || config.workouts.length === 0) {\n      throw new Error(\"Add a workouts array\");\n    }\n    this.config = { ...config, workouts: [...config.workouts] };\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private workoutValues(item: WorkoutMetricConfig): WorkoutValues {\n    const duration = parseNumber(this.hass?.states?.[item.duration_entity ?? \"\"]?.state);\n    const energy = parseNumber(this.hass?.states?.[item.energy_entity ?? \"\"]?.state);\n    const distance = parseNumber(this.hass?.states?.[item.distance_entity ?? \"\"]?.state);\n    return { duration, energy, distance };\n  }\n\n  private renderValue(value: number | null, unit?: string): string {\n    if (unit === \"min\" && value !== null) return formatMinutes(value);\n    return formatValue(value, unit);\n  }\n\n  private totalRow() {\n    if (!this.config) return nothing;\n    const totals: WorkoutValues = { duration: 0, energy: 0, distance: 0 };\n    this.config.workouts.forEach((w) => {\n      const vals = this.workoutValues(w);\n      totals.duration = vals.duration !== null ? (totals.duration ?? 0) + vals.duration : totals.duration;\n      totals.energy = vals.energy !== null ? (totals.energy ?? 0) + vals.energy : totals.energy;\n      totals.distance = vals.distance !== null ? (totals.distance ?? 0) + vals.distance : totals.distance;\n    });\n    return html`\n      <div class=\"row total\">\n        <div>${this.localize(\"label.total\")}</div>\n        <div class=\"value\">${this.renderValue(totals.duration, \"min\")}</div>\n        <div class=\"value\">${this.renderValue(totals.energy, \"kcal\")}</div>\n        ${this.config.workouts.some((w) => w.distance_entity)\n          ? html`<div class=\"value\">${this.renderValue(totals.distance, \"mi\")}</div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  private renderRow(item: WorkoutMetricConfig) {\n    const { duration, energy, distance } = this.workoutValues(item);\n    const showDistance = Boolean(item.distance_entity);\n    return html`\n      <div class=\"row\">\n        <div class=\"label\">\n          ${item.icon ? html`<ha-icon .icon=${item.icon}></ha-icon>` : nothing}\n          <span>${item.name}</span>\n        </div>\n        <div class=\"value\">${this.renderValue(duration, \"min\")}</div>\n        <div class=\"value\">${this.renderValue(energy, \"kcal\")}</div>\n        ${showDistance ? html`<div class=\"value\">${this.renderValue(distance, \"mi\")}</div>` : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card class=${this.config.compact ? \"compact\" : \"\"}>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.workouts_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"workout-list\">\n          <div class=\"row header-row\">\n            <div></div>\n            <div class=\"value\">${this.localize(\"label.duration\")}</div>\n            <div class=\"value\">${this.localize(\"label.energy\")}</div>\n            ${this.config.workouts.some((w) => w.distance_entity)\n              ? html`<div class=\"value\">${this.localize(\"label.distance\")}</div>`\n              : nothing}\n          </div>\n          ${this.totalRow()}\n          ${this.config.workouts.map((w) => this.renderRow(w))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { HomeAssistant, MetricConfig, OverviewCardConfig } from \"../types\";\nimport { formatTrend, goalValue, guessMetricName, metricDisplay, progressPercent } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult } from \"../utils/history\";\n\n@customElement(\"fitness-overview-card\")\nexport class FitnessOverviewCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: OverviewCardConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .primary-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n        gap: 12px;\n      }\n      .secondary {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 8px;\n        margin-top: 12px;\n      }\n      .chip-value {\n        font-weight: 700;\n      }\n      .progress-ring {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        background: var(--divider-color);\n        position: relative;\n      }\n      .progress-ring::after {\n        content: \"\";\n        position: absolute;\n        inset: 4px;\n        border-radius: 50%;\n        background: var(--card-background-color, var(--ha-card-background, #1e1e1e));\n      }\n      .progress-fill {\n        position: absolute;\n        inset: 0;\n        border-radius: 50%;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-overview-card-editor\");\n  }\n\n  public setConfig(config: OverviewCardConfig): void {\n    if (!config.primary_metrics || !Array.isArray(config.primary_metrics) || config.primary_metrics.length === 0) {\n      throw new Error(\"Add primary_metrics\");\n    }\n    this.config = {\n      ...config,\n      primary_metrics: normalizeMetrics(config.primary_metrics, config.preset),\n      secondary_metrics: normalizeMetrics(config.secondary_metrics ?? [], config.preset)\n    };\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    const allMetrics = [...this.config.primary_metrics, ...(this.config.secondary_metrics ?? [])];\n    await Promise.all(\n      allMetrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? Number(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    const period = getPeriod(this.config?.period);\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${this.localize(`label.period.${period}`)}):\n      ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private renderProgressRing(progress?: number) {\n    if (progress === undefined || progress === null) return nothing;\n    const clamped = Math.min(progress, 100);\n    const gradient = `conic-gradient(var(--accent-color, var(--primary-color)) ${clamped}%, var(--divider-color, #ccc) ${clamped}% 100%)`;\n    return html`\n      <div class=\"progress-ring\">\n        <div class=\"progress-fill\" style=\"background:${gradient}\"></div>\n      </div>\n    `;\n  }\n\n  private renderPrimary(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const goal = goalValue(metric, this.hass);\n    const progress = progressPercent(value, goal);\n    const unit = metric.unit_override ?? entity?.attributes?.unit_of_measurement;\n    return html`\n      <div class=\"metric\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n          ${this.renderProgressRing(progress ?? undefined)}\n        </div>\n        <div class=\"value\">${text}</div>\n        ${goal !== undefined && progress !== null\n          ? html`<div class=\"subtle\">\n              ${this.localize(\"label.of_goal\", { percent: progress })}\n              • ${this.localize(\"label.goal\")}: ${goal}\n            </div>`\n          : nothing}\n        ${this.renderTrend(metric, unit)}\n      </div>\n    `;\n  }\n\n  private renderSecondary(metric: MetricConfig) {\n    const { text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const trend = this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement);\n    return html`\n      <div class=\"chip\">\n        ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n        <span>${name}</span>\n        <span class=\"chip-value\">${text}</span>\n        ${trend}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.overview_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"primary-grid\">\n          ${this.config.primary_metrics.map((metric) => this.renderPrimary(metric))}\n        </div>\n        ${this.config.secondary_metrics && this.config.secondary_metrics.length\n          ? html`<div class=\"secondary\">\n              ${this.config.secondary_metrics.map((metric) => this.renderSecondary(metric))}\n            </div>`\n          : nothing}\n      </ha-card>\n    `;\n  }\n}\n","export function fireEvent(node: HTMLElement, type: string, detail?: any) {\n  node.dispatchEvent(new CustomEvent(type, { detail, bubbles: true, composed: true }));\n}\n","import { metricPresets } from \"../presets\";\n\nexport const periodOptions = [\n  { value: \"current\", label: \"Current\" },\n  { value: \"today\", label: \"Today\" },\n  { value: \"7d\", label: \"7 days\" },\n  { value: \"30d\", label: \"30 days\" }\n];\n\nexport const presetOptions = Object.values(metricPresets).map((preset) => ({\n  value: preset.id,\n  label: preset.name\n}));\n\nexport const metricSchema = [\n  { name: \"entity\", selector: { entity: {} } },\n  { name: \"preset\", selector: { select: { options: presetOptions } } },\n  { name: \"name\", selector: { text: {} } },\n  { name: \"icon\", selector: { icon: {} } },\n  { name: \"unit_override\", selector: { text: {} } },\n  { name: \"decimals\", selector: { number: { min: 0, max: 4, mode: \"box\" } } },\n  { name: \"goal\", selector: { number: { min: 0, mode: \"box\" } } },\n  { name: \"goal_entity\", selector: { entity: {} } },\n  { name: \"trend_entity\", selector: { entity: {} } },\n  {\n    name: \"ranges\",\n    schema: [\n      { name: \"low\", selector: { number: { mode: \"box\" } } },\n      { name: \"normal\", selector: { text: {} } },\n      { name: \"high\", selector: { number: { mode: \"box\" } } }\n    ]\n  }\n];\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions } from \"./schemas\";\n\n@customElement(\"fitness-activity-summary-card-editor\")\nexport class FitnessActivitySummaryCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-activity-summary-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"activity\", \"vitals\", \"sleep\", \"body\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions } from \"./schemas\";\n\n@customElement(\"fitness-vitals-card-editor\")\nexport class FitnessVitalsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-vitals-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"vitals\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions } from \"./schemas\";\n\n@customElement(\"fitness-sleep-card-editor\")\nexport class FitnessSleepCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-sleep-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"sleep\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions } from \"./schemas\";\n\n@customElement(\"fitness-body-metrics-card-editor\")\nexport class FitnessBodyMetricsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-body-metrics-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"body\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { WorkoutsCardConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { periodOptions } from \"./schemas\";\n\nconst workoutSchema = [\n  { name: \"name\", selector: { text: {} } },\n  { name: \"icon\", selector: { icon: {} } },\n  { name: \"duration_entity\", selector: { entity: {} } },\n  { name: \"energy_entity\", selector: { entity: {} } },\n  { name: \"distance_entity\", selector: { entity: {} } }\n];\n\n@customElement(\"fitness-workouts-card-editor\")\nexport class FitnessWorkoutsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: WorkoutsCardConfig;\n\n  setConfig(config: WorkoutsCardConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as WorkoutsCardConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-workouts-card\", workouts: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"workouts\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"workouts\", type: \"array\", schema: workoutSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { OverviewCardConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions } from \"./schemas\";\n\n@customElement(\"fitness-overview-card-editor\")\nexport class FitnessOverviewCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: OverviewCardConfig;\n\n  setConfig(config: OverviewCardConfig) {\n    this._config = { ...config };\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as OverviewCardConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data =\n      this._config ??\n      ({ type: \"custom:fitness-overview-card\", primary_metrics: [], secondary_metrics: [] } as OverviewCardConfig);\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"overview\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      { name: \"primary_metrics\", type: \"array\", schema: metricSchema },\n      { name: \"secondary_metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import catalog from \"../../data/metric-catalog.json\";\nimport { MetricCategory } from \"../types\";\n\nexport interface MetricCatalogEntry {\n  entity_id: string;\n  friendly_name?: string;\n  unit_of_measurement?: string;\n  device_class?: string | null;\n  state_class?: string | null;\n  icon?: string | null;\n  category: MetricCategory;\n}\n\nexport const metricCatalog: MetricCatalogEntry[] = (catalog as MetricCatalogEntry[]).map(\n  (item) => ({\n    ...item,\n    category: (item.category ?? \"other\") as MetricCategory\n  })\n);\n\nexport function byCategory(category: MetricCategory): MetricCatalogEntry[] {\n  return metricCatalog.filter((entry) => entry.category === category);\n}\n\nexport function findMetric(entityId: string): MetricCatalogEntry | undefined {\n  return metricCatalog.find((entry) => entry.entity_id === entityId);\n}\n","import \"./cards/fitness-activity-summary-card\";\nimport \"./cards/fitness-vitals-card\";\nimport \"./cards/fitness-sleep-card\";\nimport \"./cards/fitness-body-metrics-card\";\nimport \"./cards/fitness-workouts-card\";\nimport \"./cards/fitness-overview-card\";\n\nimport \"./editors/fitness-activity-summary-card-editor\";\nimport \"./editors/fitness-vitals-card-editor\";\nimport \"./editors/fitness-sleep-card-editor\";\nimport \"./editors/fitness-body-metrics-card-editor\";\nimport \"./editors/fitness-workouts-card-editor\";\nimport \"./editors/fitness-overview-card-editor\";\n\nexport * from \"./utils/metric-catalog\";\n\ndeclare global {\n  interface Window {\n    customCards?: Array<{\n      type: string;\n      name: string;\n      description: string;\n    }>;\n  }\n}\n\nfunction registerCard(type: string, name: string, description: string) {\n  if (!window.customCards) window.customCards = [];\n  if (!window.customCards.some((card) => card.type === type)) {\n    window.customCards.push({ type, name, description });\n  }\n}\n\nregisterCard(\n  \"fitness-activity-summary-card\",\n  \"Fitness Activity Summary\",\n  \"Shows configurable activity totals with goals.\"\n);\n\nregisterCard(\n  \"fitness-vitals-card\",\n  \"Fitness Vitals\",\n  \"Displays heart metrics with optional thresholds.\"\n);\n\nregisterCard(\n  \"fitness-sleep-card\",\n  \"Fitness Sleep\",\n  \"Summarises sleep totals and stage breakdown.\"\n);\n\nregisterCard(\n  \"fitness-body-metrics-card\",\n  \"Fitness Body Metrics\",\n  \"Shows body metrics with trend indicators.\"\n);\n\nregisterCard(\"fitness-workouts-card\", \"Fitness Workouts\", \"Summarises workout energy/duration.\");\n\nregisterCard(\"fitness-overview-card\", \"Fitness Overview\", \"Highlights primary and secondary metrics.\");\n"],"names":["t","globalThis","e","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","o","WeakMap","n$3","this","_$cssResult$","Error","cssText","styleSheet","length","get","replaceSync","set","toString","i","reduce","n","c","cssRules","is","defineProperty","getOwnPropertyDescriptor","h","getOwnPropertyNames","r","getOwnPropertySymbols","getPrototypeOf","Object","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","d","u","Boolean","Array","JSON","stringify","Number","parse","f","b","attribute","type","String","converter","reflect","useDefault","hasChanged","metadata","litPropertyMetadata","y$1","HTMLElement","_$Ei","push","observedAttributes","finalize","_$Eh","keys","state","hasOwnProperty","create","wrapped","elementProperties","noAccessor","getPropertyDescriptor","call","requestUpdate","configurable","enumerable","Map","finalized","properties","createProperty","_$Eu","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","constructor","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","_$EO","add","renderRoot","isConnected","hostConnected","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","connectedCallback","disconnectedCallback","hostDisconnected","_$AK","toAttribute","removeAttribute","getPropertyOptions","fromAttribute","_$Ej","hasAttribute","C","_$EP","has","_$Eq","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EM","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","_$ET","y","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","v","_","m","RegExp","g","$","_$litType$","strings","values","E","for","A","P","createTreeWalker","V","N","lastIndex","exec","test","x","startsWith","S","parts","el","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","I","L","z","H","tagName","append","data","indexOf","innerHTML","M","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","R","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","k","nextSibling","Z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","T","iterator","insertBefore","O","createTextNode","_$AC","_$AP","remove","element","fill","j","arguments","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","host","handleEvent","B","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","setConnected","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","addInitializer","customElements","define","kind","cardStyles","css","UNAVAILABLE_STATES","parseNumber","value","asString","trim","parsed","isFinite","defaultDecimals","unit","formatMinutes","floor","round","decimals","formatValue","unitOverride","isNaN","displayUnit","precision","rounded","formatTrend","diff","prefix","goalValue","metric","hass","goal","goal_entity","goalState","states","entity","progressPercent","min","evaluateRange","ranges","normalized","bands","hit","find","band","max","status","low","normal","high","metricDisplay","entityId","unit_override","attributes","unit_of_measurement","text","guessMetricName","friendly_name","join","languages","en","es","localize","key","language","vars","base","entries","acc","token","replace","computeLocalize","locale","metricPresets","steps","id","icon","active_energy","distance_walk_run","flights_climbed","heart_rate","resting_heart_rate","hrv_sdnn","spo2","respiratory_rate","asleep","in_bed","sleep_core","sleep_deep","sleep_rem","sleep_unknown","weight","bmi","body_fat_percentage","lean_body_mass","vo2_max","workout_cycling","workout_walking","workout_strength_training","workout_functional_strength","workout_hiit","workout_generic","cardPresets","activity","preset","vitals","sleep","stage","body","workouts","overview","normalizeMetrics","metrics","getPeriod","configPeriod","cache","async","fetchHistory","start","end","toISOString","now","Date","cached","ts","path","response","callApi","series","latest","item","error","computeTrend","period","current","previous","label","prevStart","prevEnd","setHours","setDate","getDate","getTime","previousFromEntity","candidates","previous_state","last_value","prior_value","candidate","FitnessActivitySummaryCard","trends","config","getCardSize","changed","loadTrends","trendMap","all","trendEntityId","trend_entity","currentVal","trend","show_trends","nothing","html","progress","compact","renderTrend","title","renderMetric","__decorateClass","property","customElement","FitnessVitalsCard","getConfigElement","lowered","includes","defaultRanges","statusLabel","STAGE_COLORS","core","deep","rem","unknown","FitnessSleepCard","durations","val","stageFromMetric","stageOrder","asleepValue","sum","inBedValue","totalForBreakdown","filter","toUpperCase","FitnessBodyMetricsCard","previousValue","trendIcon","FitnessWorkoutsCard","duration","duration_entity","energy","energy_entity","distance","distance_entity","totalRow","totals","w","vals","workoutValues","renderValue","some","showDistance","renderRow","FitnessOverviewCard","primary_metrics","secondary_metrics","allMetrics","clamped","renderProgressRing","percent","renderPrimary","renderSecondary","fireEvent","node","detail","dispatchEvent","CustomEvent","bubbles","composed","periodOptions","metricSchema","selector","select","number","schema","FitnessActivitySummaryCardEditor","_config","ev","boolean","_valueChanged","FitnessVitalsCardEditor","FitnessSleepCardEditor","FitnessBodyMetricsCardEditor","workoutSchema","FitnessWorkoutsCardEditor","FitnessOverviewCardEditor","metricCatalog","category","byCategory","entry","findMetric","entity_id","registerCard","description","window","customCards","card"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}