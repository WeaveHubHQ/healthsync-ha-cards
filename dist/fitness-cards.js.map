{"version":3,"file":"fitness-cards.js","sources":["../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../src/styles/shared.ts","../src/utils/formatting.ts","../src/localize.ts","../src/presets.ts","../src/utils/metrics.ts","../src/utils/history.ts","../src/cards/fitness-activity-summary-card.ts","../src/components/bars.ts","../src/utils/zones.ts","../src/components/sparkline.ts","../src/cards/fitness-vitals-card.ts","../src/cards/fitness-sleep-card.ts","../src/cards/fitness-body-metrics-card.ts","../src/cards/fitness-workouts-card.ts","../src/cards/fitness-overview-card.ts","../src/utils/events.ts","../src/editors/schemas.ts","../src/utils/autodetect.ts","../src/editors/fitness-activity-summary-card-editor.ts","../src/editors/fitness-vitals-card-editor.ts","../src/editors/fitness-sleep-card-editor.ts","../src/editors/fitness-body-metrics-card-editor.ts","../src/editors/fitness-workouts-card-editor.ts","../src/editors/fitness-overview-card-editor.ts","../src/utils/metric-catalog.ts","../src/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i,e=!1,h){if(void 0!==t){const r=this.constructor;if(!1===e&&(h=this[t]),i??=r.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.2\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t=>t,s=t.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,h=\"$lit$\",o=`lit$${Math.random().toFixed(9).slice(2)}$`,n=\"?\"+o,r=`<${n}>`,l=document,c=()=>l.createComment(\"\"),a=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,d=t=>u(t)||\"function\"==typeof t?.[Symbol.iterator],f=\"[ \\t\\n\\f\\r]\",v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${f}(?:([^\\\\s\"'>=/]+)(${f}*=${f}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,x=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),b=x(1),w=x(2),T=x(3),E=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),C=new WeakMap,P=l.createTreeWalker(l,129);function V(t,i){if(!u(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const N=(t,i)=>{const s=t.length-1,e=[];let n,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=v;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,f=0;for(;f<s.length&&(c.lastIndex=f,u=c.exec(s),null!==u);)f=c.lastIndex,c===v?\"!--\"===u[1]?c=_:void 0!==u[1]?c=m:void 0!==u[2]?(y.test(u[2])&&(n=RegExp(\"</\"+u[2],\"g\")),c=p):void 0!==u[3]&&(c=p):c===p?\">\"===u[0]?(c=n??v,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?p:'\"'===u[3]?$:g):c===$||c===g?c=p:c===_||c===m?c=v:(c=p,n=void 0);const x=c===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===v?s+r:d>=0?(e.push(a),s.slice(0,d)+h+s.slice(d)+o+x):s+o+(-2===d?i:x)}return[V(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),e]};class S{constructor({strings:t,_$litType$:i},e){let r;this.parts=[];let l=0,a=0;const u=t.length-1,d=this.parts,[f,v]=N(t,i);if(this.el=S.createElement(f,e),P.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(h)){const i=v[a++],s=r.getAttribute(t).split(o),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:l,name:e[2],strings:s,ctor:\".\"===e[1]?I:\"?\"===e[1]?L:\"@\"===e[1]?z:H}),r.removeAttribute(t)}else t.startsWith(o)&&(d.push({type:6,index:l}),r.removeAttribute(t));if(y.test(r.tagName)){const t=r.textContent.split(o),i=t.length-1;if(i>0){r.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)r.append(t[s],c()),P.nextNode(),d.push({type:2,index:++l});r.append(t[i],c())}}}else if(8===r.nodeType)if(r.data===n)d.push({type:2,index:l});else{let t=-1;for(;-1!==(t=r.data.indexOf(o,t+1));)d.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function M(t,i,s=t,e){if(i===E)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=a(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=M(t,h._$AS(t,i.values),h,e)),i}class R{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??l).importNode(i,!0);P.currentNode=e;let h=P.nextNode(),o=0,n=0,r=s[0];for(;void 0!==r;){if(o===r.index){let i;2===r.type?i=new k(h,h.nextSibling,this,t):1===r.type?i=new r.ctor(h,r.name,r.strings,this,t):6===r.type&&(i=new Z(h,this,t)),this._$AV.push(i),r=s[++n]}o!==r?.index&&(h=P.nextNode(),o++)}return P.currentNode=l,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=M(this,t,i),a(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==E&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&a(this._$AH)?this._$AA.nextSibling.data=t:this.T(l.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=S.createElement(V(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new R(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=C.get(t.strings);return void 0===i&&C.set(t.strings,i=new S(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new k(this.O(c()),this.O(c()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=i(t).nextSibling;i(t).remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class H{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=M(this,t,i,0),o=!a(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=M(this,e[s+n],i,n),r===E&&(r=this._$AH[n]),o||=!a(r)||r!==this._$AH[n],r===A?t=A:t!==A&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class I extends H{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends H{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class z extends H{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=M(this,t,i,0)??A)===E)return;const s=this._$AH,e=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==A&&(s===A||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const j={M:h,P:o,A:n,C:1,L:N,R,D:d,V:M,I:k,H,N:L,U:z,B:I,F:Z},B=t.litHtmlPolyfillSupport;B?.(S,k),(t.litHtmlVersions??=[]).push(\"3.3.2\");const D=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new k(i.insertBefore(c(),t),t,void 0,s??{})}return h._$AI(t),h};export{j as _$LH,b as html,T as mathml,E as noChange,A as nothing,D as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.2\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{notEqual as t,defaultConverter as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:t},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t,!0,r)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t,!0,r)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import { css } from \"lit\";\n\nexport const cardStyles = css`\n  :host {\n    display: block;\n  }\n\n  .chip {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 8px 10px;\n    border-radius: 999px;\n    background: var(\n      --ha-chip-background,\n      color-mix(in srgb, var(--card-background-color, #111) 70%, transparent)\n    );\n    color: var(--primary-text-color);\n    font-size: 0.9rem;\n  }\n\n  .mini-row {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 10px;\n    border-radius: 10px;\n    background: var(\n      --ha-card-section-background,\n      color-mix(\n        in srgb,\n        var(--card-background-color, var(--ha-card-background, #1e1e1e)) 70%,\n        var(--secondary-background-color, rgba(0, 0, 0, 0.04))\n      )\n    );\n  }\n\n  ha-card {\n    padding: var(--ha-card-padding, 16px);\n    background: var(\n      --ha-card-background,\n      var(--card-background-color, var(--primary-background-color))\n    );\n    color: var(--primary-text-color);\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 12px;\n    gap: 8px;\n  }\n\n  .title {\n    font-size: 1.1rem;\n    font-weight: 700;\n  }\n\n  .metric-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n    gap: 12px;\n  }\n\n  .metric {\n    border-radius: 12px;\n    padding: 12px;\n    background: var(\n      --ha-card-section-background,\n      color-mix(\n        in srgb,\n        var(--card-background-color, var(--ha-card-background, #1e1e1e)) 70%,\n        var(--secondary-background-color, rgba(0, 0, 0, 0.04))\n      )\n    );\n    box-shadow: var(--ha-card-box-shadow, none);\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .metric.compact {\n    padding: 10px;\n  }\n\n  .metric .label {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n    color: var(--secondary-text-color);\n    font-size: 0.9rem;\n    text-transform: none;\n  }\n\n  .metric .value {\n    font-size: 1.6rem;\n    font-weight: 700;\n    line-height: 1.2;\n  }\n\n  .metric .subtle {\n    color: var(--secondary-text-color);\n    font-size: 0.85rem;\n  }\n\n  .progress {\n    height: 6px;\n    border-radius: 999px;\n    background: var(--divider-color, rgba(128, 128, 128, 0.25));\n    overflow: hidden;\n  }\n\n  .progress .bar {\n    height: 100%;\n    border-radius: 999px;\n    background: var(--accent-color, var(--primary-color));\n    width: 0%;\n    transition: width 0.3s ease;\n  }\n\n  .status-low {\n    color: var(--warning-color, #f9a825);\n  }\n\n  .status-high {\n    color: var(--error-color, #ef5350);\n  }\n\n  .status-normal {\n    color: var(--success-color, var(--primary-color));\n  }\n\n  .pill {\n    padding: 3px 8px;\n    border-radius: 999px;\n    background: color-mix(\n      in srgb,\n      var(--accent-color, var(--primary-color)) 15%,\n      transparent\n    );\n    color: var(--accent-color, var(--primary-color));\n    font-size: 0.75rem;\n    font-weight: 600;\n  }\n`;\n","import { HassEntity, HomeAssistant, MetricConfig, RangeBand, RangeConfig } from \"../types\";\n\nconst UNAVAILABLE_STATES = new Set([\n  \"unknown\",\n  \"unavailable\",\n  \"none\",\n  \"null\",\n  \"nan\",\n  \"\"\n]);\n\nexport function parseNumber(value?: string | number | null): number | null {\n  if (value === null || value === undefined) return null;\n  const asString = String(value).trim();\n  if (UNAVAILABLE_STATES.has(asString)) return null;\n  const parsed = Number(asString);\n  return Number.isFinite(parsed) ? parsed : null;\n}\n\nexport function defaultDecimals(unit?: string): number {\n  switch (unit) {\n    case \"bpm\":\n    case \"breaths/min\":\n    case \"count\":\n    case \"kcal\":\n    case \"ms\":\n    case \"mg/dL\":\n    case \"s\":\n      return 0;\n    case \"%\":\n      return 1;\n    case \"lb\":\n    case \"fl oz US\":\n      return 1;\n    case \"mi\":\n      return 2;\n    case \"mL/(kg*min)\":\n      return 1;\n    default:\n      return 1;\n  }\n}\n\nfunction formatSeconds(value: number): string {\n  if (value >= 3600) {\n    const hours = Math.floor(value / 3600);\n    const minutes = Math.floor((value % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  }\n  if (value >= 90) {\n    const minutes = Math.floor(value / 60);\n    const seconds = Math.round(value % 60);\n    return `${minutes}m ${seconds}s`;\n  }\n  return `${Math.round(value)}s`;\n}\n\nexport function formatMinutes(value: number): string {\n  if (value >= 90) {\n    const hours = Math.floor(value / 60);\n    const minutes = Math.round(value % 60);\n    return `${hours}h ${minutes}m`;\n  }\n  const decimals = value >= 10 ? 0 : 1;\n  return `${value.toFixed(decimals)} min`;\n}\n\nexport function formatValue(\n  value: number | null,\n  unit?: string,\n  decimals?: number,\n  unitOverride?: string\n): string {\n  if (value === null || value === undefined || Number.isNaN(value)) {\n    return \"—\";\n  }\n\n  const displayUnit = unitOverride ?? unit;\n  if (unit === \"min\") {\n    return formatMinutes(value);\n  }\n  if (unit === \"s\") {\n    return formatSeconds(value);\n  }\n\n  const precision = decimals ?? defaultDecimals(unit);\n  const rounded = value.toFixed(precision);\n  return displayUnit ? `${rounded} ${displayUnit}` : rounded;\n}\n\nexport function formatTrend(diff: number | null, unit?: string, decimals?: number): string {\n  if (diff === null || Number.isNaN(diff)) return \"—\";\n  const prefix = diff > 0 ? \"+\" : \"\";\n  const precision = decimals ?? defaultDecimals(unit);\n  const rounded = diff.toFixed(precision);\n  return unit ? `${prefix}${rounded} ${unit}` : `${prefix}${rounded}`;\n}\n\nexport function goalValue(\n  metric: MetricConfig,\n  hass?: HomeAssistant,\n  goals?: Record<string, number | { entity: string }>\n): number | undefined {\n  if (typeof metric.goal === \"number\") return metric.goal;\n  if (metric.goal_entity) {\n    const goalState = hass?.states?.[metric.goal_entity];\n    const parsed = parseNumber(goalState?.state);\n    if (parsed !== null) return parsed;\n  }\n  if (metric.goal && typeof metric.goal === \"object\" && \"entity\" in metric.goal) {\n    const goalState = hass?.states?.[metric.goal.entity];\n    const parsed = parseNumber(goalState?.state);\n    if (parsed !== null) return parsed;\n  }\n  const key = metric.preset || metric.entity;\n  if (goals && key && goals[key] !== undefined) {\n    const cfg = goals[key];\n    if (typeof cfg === \"number\") return cfg;\n    if (cfg && typeof cfg === \"object\" && \"entity\" in cfg) {\n      const goalState = hass?.states?.[cfg.entity];\n      const parsed = parseNumber(goalState?.state);\n      if (parsed !== null) return parsed;\n    }\n  }\n  return undefined;\n}\n\nexport function progressPercent(value: number | null, goal?: number): number | null {\n  if (value === null || goal === undefined || goal === 0) return null;\n  return Math.min(Math.round((value / goal) * 100), 999);\n}\n\nfunction asRangeConfig(ranges?: RangeConfig | RangeBand[]): RangeConfig | undefined {\n  if (!ranges) return undefined;\n  if (Array.isArray(ranges)) {\n    return { bands: ranges };\n  }\n  return ranges;\n}\n\nexport function evaluateRange(\n  value: number | null,\n  ranges?: RangeConfig | RangeBand[]\n): { status?: \"low\" | \"normal\" | \"high\" | \"band\"; band?: RangeBand } {\n  if (value === null || ranges === undefined) return {};\n  const normalized = asRangeConfig(ranges);\n  if (!normalized) return {};\n\n  if (normalized.bands && normalized.bands.length) {\n    const hit = normalized.bands.find(\n      (band) =>\n        (band.min === undefined || value >= band.min) &&\n        (band.max === undefined || value <= band.max)\n    );\n    if (!hit) return {};\n    if (hit.severity === \"low\") return { status: \"low\", band: hit };\n    if (hit.severity === \"high\" || hit.severity === \"error\") return { status: \"high\", band: hit };\n    if (hit.severity === \"normal\" || hit.severity === \"info\") return { status: \"normal\", band: hit };\n    return { status: \"band\", band: hit };\n  }\n\n  const { low, normal, high } = normalized;\n  if (low !== undefined && value < low) return { status: \"low\" };\n  if (high !== undefined && value > high) return { status: \"high\" };\n  if (Array.isArray(normal)) {\n    if (\n      (normal[0] === undefined || value >= normal[0]) &&\n      (normal[1] === undefined || value <= normal[1])\n    ) {\n      return { status: \"normal\" };\n    }\n  } else if (typeof normal === \"number\" && value === normal) {\n    return { status: \"normal\" };\n  } else if (low !== undefined || high !== undefined) {\n    return { status: \"normal\" };\n  }\n  return {};\n}\n\nexport function extractValue(entity: HassEntity | undefined): number | null {\n  if (!entity) return null;\n  return parseNumber(entity.state);\n}\n\nexport function metricDisplay(\n  hass: HomeAssistant | undefined,\n  metric: MetricConfig\n): { value: number | null; unit?: string; text: string; entity?: HassEntity } {\n  const entityId = metric.entity ?? \"\";\n  const entity = entityId ? hass?.states?.[entityId] : undefined;\n  const unit = metric.unit_override ?? entity?.attributes?.unit_of_measurement;\n  const value = extractValue(entity);\n  const text = formatValue(value, unit, metric.decimals, metric.unit_override);\n  return { value, unit, text, entity };\n}\n\nexport function guessMetricName(metric: MetricConfig, entity?: HassEntity): string {\n  return (\n    metric.name ||\n    entity?.attributes?.friendly_name ||\n    (metric.entity ? metric.entity.split(\".\").slice(1).join(\".\") : \"Metric\")\n  );\n}\n","import en from \"../languages/en.json\";\nimport es from \"../languages/es.json\";\n\ntype LanguageMap = Record<string, string>;\n\nconst languages: Record<string, LanguageMap> = {\n  en,\n  es\n};\n\nfunction pickLanguage(language?: string): LanguageMap {\n  if (!language) return languages.en;\n  const normalized = language.split(\"-\")[0];\n  return languages[normalized] || languages.en;\n}\n\nexport function localize(key: string, language?: string, vars?: Record<string, string | number>): string {\n  const strings = pickLanguage(language);\n  const base = strings[key] ?? languages.en[key] ?? key;\n  if (!vars) return base;\n  return Object.entries(vars).reduce(\n    (acc, [token, value]) => acc.replace(`{${token}}`, String(value)),\n    base\n  );\n}\n\nexport function computeLocalize(hass?: any) {\n  const language = hass?.locale?.language || hass?.language;\n  return (key: string, vars?: Record<string, string | number>) => localize(key, language, vars);\n}\n","import { MetricConfig, RangeConfig } from \"./types\";\n\nexport interface MetricPreset {\n  id: string;\n  name: string;\n  icon: string;\n  unit?: string;\n  decimals?: number;\n  ranges?: RangeConfig;\n}\n\ntype PresetGroup = Record<string, MetricPreset>;\n\nexport const metricPresets: PresetGroup = {\n  steps: { id: \"steps\", name: \"Steps\", icon: \"mdi:shoe-print\", unit: \"count\", decimals: 0 },\n  active_energy: { id: \"active_energy\", name: \"Active Energy\", icon: \"mdi:fire\", unit: \"kcal\", decimals: 0 },\n  distance_walk_run: { id: \"distance_walk_run\", name: \"Walk/Run Distance\", icon: \"mdi:walk\", unit: \"mi\", decimals: 2 },\n  distance_cycling: { id: \"distance_cycling\", name: \"Cycling Distance\", icon: \"mdi:bike\", unit: \"mi\", decimals: 2 },\n  flights_climbed: { id: \"flights_climbed\", name: \"Flights Climbed\", icon: \"mdi:stairs-up\", unit: \"count\", decimals: 0 },\n\n  heart_rate: { id: \"heart_rate\", name: \"Heart Rate\", icon: \"mdi:heart-pulse\", unit: \"bpm\", decimals: 0, ranges: { low: 50, normal: [55, 95], high: 120 } },\n  resting_heart_rate: { id: \"resting_heart_rate\", name: \"Resting HR\", icon: \"mdi:heart\", unit: \"bpm\", decimals: 0, ranges: { low: 45, normal: [50, 90], high: 110 } },\n  hrv_sdnn: { id: \"hrv_sdnn\", name: \"HRV (SDNN)\", icon: \"mdi:heart-flash\", unit: \"ms\", decimals: 0, ranges: { low: 20 } },\n  spo2: { id: \"spo2\", name: \"SpO2\", icon: \"mdi:water-percent\", unit: \"%\", decimals: 1, ranges: { low: 92, normal: [95, 100] } },\n  respiratory_rate: { id: \"respiratory_rate\", name: \"Respiratory Rate\", icon: \"mdi:lungs\", unit: \"breaths/min\", decimals: 0, ranges: { low: 10, normal: [12, 20], high: 24 } },\n\n  asleep: { id: \"asleep\", name: \"Asleep\", icon: \"mdi:sleep\", unit: \"min\", decimals: 0 },\n  in_bed: { id: \"in_bed\", name: \"In bed\", icon: \"mdi:bed\", unit: \"min\", decimals: 0 },\n  sleep_core: { id: \"sleep_core\", name: \"Core\", icon: \"mdi:alpha-c-circle\", unit: \"min\", decimals: 0 },\n  sleep_deep: { id: \"sleep_deep\", name: \"Deep\", icon: \"mdi:alpha-d-circle\", unit: \"min\", decimals: 0 },\n  sleep_rem: { id: \"sleep_rem\", name: \"REM\", icon: \"mdi:alpha-r-circle\", unit: \"min\", decimals: 0 },\n  sleep_unknown: { id: \"sleep_unknown\", name: \"Unknown\", icon: \"mdi:help-circle-outline\", unit: \"min\", decimals: 0 },\n\n  weight: { id: \"weight\", name: \"Weight\", icon: \"mdi:scale-bathroom\", unit: \"lb\", decimals: 1 },\n  bmi: { id: \"bmi\", name: \"BMI\", icon: \"mdi:human-male-height\", unit: \"count\", decimals: 1 },\n  body_fat_percentage: { id: \"body_fat_percentage\", name: \"Body Fat\", icon: \"mdi:percent\", unit: \"%\", decimals: 1 },\n  lean_body_mass: { id: \"lean_body_mass\", name: \"Lean Mass\", icon: \"mdi:human\", unit: \"lb\", decimals: 1 },\n  vo2_max: { id: \"vo2_max\", name: \"VO2 Max\", icon: \"mdi:run\", unit: \"mL/(kg*min)\", decimals: 1 },\n  glucose: { id: \"glucose\", name: \"Blood Glucose\", icon: \"mdi:diabetes\", unit: \"mg/dL\", decimals: 0 },\n\n  workout_cycling: { id: \"workout_cycling\", name: \"Cycling\", icon: \"mdi:bike\" },\n  workout_walking: { id: \"workout_walking\", name: \"Walking\", icon: \"mdi:walk\" },\n  workout_strength_training: { id: \"workout_strength_training\", name: \"Strength Training\", icon: \"mdi:weight-lifter\" },\n  workout_functional_strength: { id: \"workout_functional_strength\", name: \"Functional Strength\", icon: \"mdi:arm-flex\" },\n  workout_hiit: { id: \"workout_hiit\", name: \"HIIT\", icon: \"mdi:lightning-bolt\" },\n  workout_generic: { id: \"workout_generic\", name: \"Workout\", icon: \"mdi:arm-flex-outline\" }\n};\n\nexport const cardPresets: Record<string, MetricConfig[]> = {\n  activity: [\n    { preset: \"active_energy\" },\n    { preset: \"steps\" },\n    { preset: \"distance_walk_run\" },\n    { preset: \"flights_climbed\" }\n  ],\n  vitals: [\n    { preset: \"heart_rate\" },\n    { preset: \"resting_heart_rate\" },\n    { preset: \"hrv_sdnn\" },\n    { preset: \"spo2\" },\n    { preset: \"respiratory_rate\" }\n  ],\n  sleep: [\n    { preset: \"asleep\", stage: \"asleep\" },\n    { preset: \"in_bed\", stage: \"in_bed\" },\n    { preset: \"sleep_core\", stage: \"core\" },\n    { preset: \"sleep_deep\", stage: \"deep\" },\n    { preset: \"sleep_rem\", stage: \"rem\" },\n    { preset: \"sleep_unknown\", stage: \"unknown\" }\n  ],\n  body: [\n    { preset: \"weight\" },\n    { preset: \"bmi\" },\n    { preset: \"body_fat_percentage\" },\n    { preset: \"lean_body_mass\" },\n    { preset: \"vo2_max\" }\n  ],\n  workouts: [],\n  overview: []\n};\n\nexport function applyMetricPreset(metric: MetricConfig): MetricConfig {\n  if (!metric.preset) return metric;\n  const preset = metricPresets[metric.preset];\n  if (!preset) return metric;\n  return {\n    ...preset,\n    ...metric,\n    name: metric.name ?? preset.name,\n    icon: metric.icon ?? preset.icon,\n    unit_override: metric.unit_override ?? preset.unit,\n    decimals: metric.decimals ?? preset.decimals,\n    ranges: metric.ranges ?? preset.ranges\n  };\n}\n","import { MetricConfig, Period } from \"../types\";\nimport { applyMetricPreset, cardPresets } from \"../presets\";\n\nexport function normalizeMetrics(metrics: MetricConfig[] = [], preset?: string): MetricConfig[] {\n  if (metrics.length === 0 && preset && cardPresets[preset]) {\n    metrics = cardPresets[preset].map((m) => ({ ...m }));\n  }\n  return metrics.map((metric) => applyMetricPreset(metric));\n}\n\nexport function getPeriod(configPeriod?: Period): Period {\n  return configPeriod ?? \"current\";\n}\n","import { HassEntity, HomeAssistant, Period } from \"../types\";\nimport { parseNumber } from \"./formatting\";\n\ninterface HistoryEntry {\n  state: string;\n  last_changed: string;\n}\n\ntype HistoryResponse = HistoryEntry[][];\n\nconst cache = new Map<string, { ts: number; value: number | null }>();\nconst seriesCache = new Map<string, { ts: number; value: number[] }>();\nconst CACHE_MS = 30_000;\nconst THROTTLE_MS = 2_000;\nconst lastRequest: Record<string, number> = {};\n\nfunction buildKey(entityId: string, start: Date, end: Date) {\n  return `${entityId}-${start.toISOString()}-${end.toISOString()}`;\n}\n\nasync function fetchHistory(\n  hass: HomeAssistant,\n  entityId: string,\n  start: Date,\n  end: Date\n): Promise<number | null> {\n  const key = buildKey(entityId, start, end);\n  const now = Date.now();\n  const cached = cache.get(key);\n  if (lastRequest[key] && now - lastRequest[key] < THROTTLE_MS) {\n    if (cached) return cached.value;\n  }\n  if (cached && now - cached.ts < CACHE_MS) return cached.value;\n\n  try {\n    const path = `history/period/${start.toISOString()}?filter_entity_id=${entityId}&end_time=${end.toISOString()}&minimal_response`;\n    // @ts-ignore hass.callApi is provided by HA\n    lastRequest[key] = now;\n    const response: HistoryResponse = await hass.callApi?.(\"GET\", path);\n    const series = Array.isArray(response) ? response[0] : undefined;\n    if (!series || !series.length) {\n      cache.set(key, { ts: now, value: null });\n      return null;\n    }\n    const latest = [...series].reverse().find((item) => parseNumber(item.state) !== null);\n    const parsed = latest ? parseNumber(latest.state) : null;\n    cache.set(key, { ts: now, value: parsed });\n    return parsed;\n  } catch (error) {\n    cache.set(key, { ts: now, value: null });\n    return null;\n  }\n}\n\nfunction windowForPeriod(period: Period): { start: Date; end: Date; prevStart: Date; prevEnd: Date } {\n  const end = new Date();\n  const start = new Date();\n  if (period === \"today\") {\n    start.setHours(0, 0, 0, 0);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 1);\n    const prevEnd = new Date(start);\n    return { start, end, prevStart, prevEnd };\n  }\n  if (period === \"7d\") {\n    start.setDate(start.getDate() - 7);\n    const prevEnd = new Date(start);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 7);\n    return { start, end, prevStart, prevEnd };\n  }\n  if (period === \"30d\") {\n    start.setDate(start.getDate() - 30);\n    const prevEnd = new Date(start);\n    const prevStart = new Date(start);\n    prevStart.setDate(prevStart.getDate() - 30);\n    return { start, end, prevStart, prevEnd };\n  }\n  const prevEnd = new Date();\n  const prevStart = new Date(prevEnd.getTime() - 30 * 60 * 1000);\n  return { start, end, prevStart, prevEnd };\n}\n\nexport interface TrendResult {\n  current: number | null;\n  previous: number | null;\n  diff: number | null;\n  label: string;\n}\n\nexport async function computeTrend(\n  hass: HomeAssistant | undefined,\n  entityId: string | undefined,\n  period: Period\n): Promise<TrendResult> {\n  if (!hass || !entityId) {\n    return { current: null, previous: null, diff: null, label: period };\n  }\n  const { start, end, prevStart, prevEnd } = windowForPeriod(period);\n  const current = await fetchHistory(hass, entityId, start, end);\n  const previous = await fetchHistory(hass, entityId, prevStart, prevEnd);\n  const diff = current !== null && previous !== null ? current - previous : null;\n  return { current, previous, diff, label: period };\n}\n\nexport function previousFromEntity(entity?: HassEntity): number | null {\n  if (!entity) return null;\n  const candidates = [\n    entity.attributes?.previous_state,\n    entity.attributes?.previous,\n    entity.attributes?.last_value,\n    entity.attributes?.prior_value\n  ];\n  for (const candidate of candidates) {\n    const parsed = parseNumber(candidate);\n    if (parsed !== null) return parsed;\n  }\n  return null;\n}\n\nexport async function fetchHistorySeries(\n  hass: HomeAssistant | undefined,\n  entityId: string | undefined,\n  start: Date,\n  end: Date,\n  points: number\n): Promise<number[]> {\n  if (!hass || !entityId) return [];\n  const key = `${entityId}-${start.toISOString()}-${end.toISOString()}-${points}`;\n  const now = Date.now();\n  const cached = seriesCache.get(key);\n  if (cached && now - cached.ts < CACHE_MS) return cached.value;\n\n  try {\n    lastRequest[key] = now;\n    const path = `history/period/${start.toISOString()}?filter_entity_id=${entityId}&end_time=${end.toISOString()}&minimal_response`;\n    // @ts-ignore\n    const response: HistoryResponse = await hass.callApi?.(\"GET\", path);\n    const series = Array.isArray(response) ? response[0] : undefined;\n    if (!series || !series.length) {\n      seriesCache.set(key, { ts: now, value: [] });\n      return [];\n    }\n    const bucket: number[] = [];\n    const span = end.getTime() - start.getTime();\n    const interval = span / points;\n    for (let i = 0; i < points; i++) {\n      const bucketStart = start.getTime() + i * interval;\n      const bucketEnd = bucketStart + interval;\n      const slice = series.filter((item) => {\n        const ts = new Date(item.last_changed).getTime();\n        return ts >= bucketStart && ts < bucketEnd;\n      });\n      const latest = [...slice].reverse().find((item) => parseNumber(item.state) !== null);\n      bucket.push(latest ? (parseNumber(latest.state) as number) : NaN);\n    }\n    seriesCache.set(key, { ts: now, value: bucket });\n    return bucket;\n  } catch {\n    seriesCache.set(key, { ts: now, value: [] });\n    return [];\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig, Period } from \"../types\";\nimport {\n  goalValue,\n  guessMetricName,\n  metricDisplay,\n  progressPercent,\n  formatTrend\n} from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult, fetchHistorySeries } from \"../utils/history\";\nimport { barSeries } from \"../components/bars\";\n\n@customElement(\"fitness-activity-summary-card\")\nexport class FitnessActivitySummaryCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n  @state() private historySeries: Record<string, number[]> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .metric {\n        position: relative;\n      }\n      .goal-row {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 6px;\n      }\n      .progress-label {\n        font-size: 0.8rem;\n        color: var(--secondary-text-color);\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-activity-summary-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with at least one entry\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n      this.loadHistory();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        const trendEntityId = metric.trend_entity ?? entityId;\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        if (period === \"current\") {\n          const currentVal = entity ? Number(entity.state) : null;\n          const previous = metric.trend_entity\n            ? previousFromEntity(this.hass?.states?.[metric.trend_entity])\n            : previousFromEntity(entity);\n          trendMap[entityId] = {\n            current: currentVal,\n            previous,\n            diff: currentVal !== null && previous !== null ? currentVal - previous : null,\n            label: period\n          };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, trendEntityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private async loadHistory() {\n    if (!this.config || !this.hass || !this.config.history) return;\n    const days = this.config.history_window_days ?? 7;\n    const points = this.config.history_points ?? Math.max(days, 7);\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - days);\n    const series: Record<string, number[]> = { ...this.historySeries };\n    await Promise.all(\n      this.config.metrics\n        .filter((m) => m.entity)\n        .map(async (metric) => {\n          const entityId = metric.entity!;\n          const values = await fetchHistorySeries(this.hass!, entityId, start, end, points);\n          series[entityId] = values;\n        })\n    );\n    this.historySeries = series;\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    const period = getPeriod(this.config?.period);\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    const periodLabel = this.localize(`label.period.${period}`) || period;\n    const compare = this.localize(\"label.vs_previous\", { period: periodLabel });\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${compare}):\n      ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const goal = goalValue(metric, this.hass, this.config?.goals);\n    const progress = progressPercent(value, goal);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n        </div>\n        <div class=\"value\">${text}</div>\n        ${this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n        ${goal !== undefined && progress !== null\n          ? html`\n              <div class=\"goal-row\">\n                <span class=\"progress-label\">${progress}% of goal</span>\n                <span class=\"progress-label\">${this.localize(\"label.goal\")}: ${goal}</span>\n              </div>\n              <div class=\"progress\">\n                <div class=\"bar\" style=\"width: ${Math.min(progress, 100)}%\"></div>\n              </div>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  private renderHistoryBars() {\n    if (!this.config?.history) return nothing;\n    const period = getPeriod(this.config.period);\n    if (period !== \"7d\" && period !== \"30d\") return nothing;\n    const days = this.config.history_window_days ?? (period === \"7d\" ? 7 : 30);\n    const targetMetrics = this.config.metrics.filter((m) =>\n      (m.preset || \"\").match(/steps|active_energy|distance/)\n    );\n    if (!targetMetrics.length) return nothing;\n    const metric = targetMetrics[0];\n    const values = metric.entity ? this.historySeries[metric.entity] : [];\n    if (!values || !values.length) return nothing;\n    const labels = Array.from({ length: Math.min(values.length, days) }, (_, i) => `${i + 1}`);\n    const recent = values.slice(-days).map((v) => (Number.isFinite(v) ? Number(v.toFixed(2)) : 0));\n    return html`<div class=\"subtle\" style=\"margin-bottom:8px;\">\n      ${this.localize(\"label.trend\")} (${this.localize(`label.period.${period}`)}): ${metric.name ??\n      metric.preset}\n    </div>\n    ${barSeries(recent, labels)}`;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">\n            ${this.config.title ?? this.localize(\"card.activity_title\")}\n          </div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        ${this.renderHistoryBars()}\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { html, TemplateResult } from \"lit\";\n\nexport function barSeries(values: number[], labels?: string[]): TemplateResult {\n  const max = Math.max(...values.filter((v) => Number.isFinite(v)), 0);\n  return html`\n    <div style=\"display:flex; gap:6px; align-items:flex-end;\">\n      ${values.map((v, idx) => {\n        const height = max > 0 && Number.isFinite(v) ? Math.max((v / max) * 100, 4) : 4;\n        return html`<div style=\"text-align:center; flex:1;\">\n          <div\n            style=\"height:${height}px; background: var(--accent-color, var(--primary-color)); border-radius:6px;\"\n            title=${Number.isFinite(v) ? String(v) : \"—\"}\n          ></div>\n          ${labels ? html`<div style=\"font-size:0.7rem; color:var(--secondary-text-color);\">${labels[idx]}</div>` : \"\"}\n        </div>`;\n      })}\n    </div>\n  `;\n}\n","import { RangeBand, RangeConfig, MetricConfig } from \"../types\";\n\nconst defaultZones: Record<string, RangeConfig> = {\n  heart_rate: { bands: [{ label: \"Low\", max: 50, severity: \"low\" }, { label: \"Normal\", min: 50, max: 100, severity: \"normal\" }, { label: \"High\", min: 100, severity: \"high\" }] },\n  resting_heart_rate: { bands: [{ label: \"Low\", max: 45, severity: \"low\" }, { label: \"Normal\", min: 45, max: 90, severity: \"normal\" }, { label: \"High\", min: 90, severity: \"high\" }] },\n  spo2: { bands: [{ label: \"Low\", max: 92, severity: \"low\" }, { label: \"Normal\", min: 95, max: 100, severity: \"normal\" }] },\n  respiratory_rate: { bands: [{ label: \"Low\", max: 10, severity: \"low\" }, { label: \"Normal\", min: 12, max: 20, severity: \"normal\" }, { label: \"High\", min: 24, severity: \"high\" }] },\n  glucose: { bands: [{ label: \"Low\", max: 70, severity: \"low\" }, { label: \"Normal\", min: 80, max: 140, severity: \"normal\" }, { label: \"High\", min: 180, severity: \"high\" }] },\n  weight: { bands: [] }\n};\n\nexport function metricKey(metric: MetricConfig): string | undefined {\n  return metric.preset || metric.entity;\n}\n\nexport function resolveZones(\n  metric: MetricConfig,\n  cardZones?: Record<string, { bands: RangeBand[] }>\n): RangeConfig | undefined {\n  if (metric.zones_disabled) return undefined;\n  const key = metricKey(metric);\n  if (!key) return undefined;\n  if (metric.ranges) {\n    if (Array.isArray(metric.ranges)) return { bands: metric.ranges as RangeBand[] };\n    return metric.ranges as RangeConfig;\n  }\n  if (cardZones && cardZones[key]) return cardZones[key];\n  if (metric.preset && defaultZones[metric.preset]) return defaultZones[metric.preset];\n  return undefined;\n}\n","import { svg, TemplateResult } from \"lit\";\n\nexport function sparkline(values: number[], width = 120, height = 40): TemplateResult {\n  const clean = values.filter((v) => Number.isFinite(v));\n  if (!clean.length) return svg``;\n  const min = Math.min(...clean);\n  const max = Math.max(...clean);\n  const range = max - min || 1;\n  const step = width / Math.max(values.length - 1, 1);\n  const points = values.map((v, i) => {\n    const normalized = Number.isFinite(v) ? (v - min) / range : 0.5;\n    const y = height - normalized * height;\n    const x = i * step;\n    return `${x},${y}`;\n  });\n  return svg`<svg viewBox=\"0 0 ${width} ${height}\" width=\"${width}\" height=\"${height}\">\n    <polyline\n      fill=\"none\"\n      stroke=\"var(--accent-color, var(--primary-color))\"\n      stroke-width=\"2\"\n      points=\"${points.join(\" \")}\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>`;\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig, RangeConfig } from \"../types\";\nimport { evaluateRange, formatTrend, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult, fetchHistorySeries } from \"../utils/history\";\nimport { resolveZones } from \"../utils/zones\";\nimport { sparkline } from \"../components/sparkline\";\n\n@customElement(\"fitness-vitals-card\")\nexport class FitnessVitalsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n  @state() private historySeries: Record<string, number[]> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .metric {\n        position: relative;\n      }\n      .status-chip {\n        align-self: flex-start;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-vitals-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with at least one entry\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n      this.loadHistory();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? parseNumber(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private async loadHistory() {\n    if (!this.config || !this.hass || !this.config.history) return;\n    const days = this.config.history_window_days ?? 7;\n    const points = this.config.history_points ?? 24;\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - days);\n    const series: Record<string, number[]> = { ...this.historySeries };\n    await Promise.all(\n      this.config.metrics\n        .filter((m) => m.entity)\n        .map(async (metric) => {\n          const id = metric.entity!;\n          const values = await fetchHistorySeries(this.hass!, id, start, end, points);\n          series[id] = values;\n        })\n    );\n    this.historySeries = series;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    const period = getPeriod(this.config?.period);\n    const periodLabel = this.localize(`label.period.${period}`) || period;\n    const compare = this.localize(\"label.vs_previous\", { period: periodLabel });\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${compare}): ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private defaultRanges(metric: MetricConfig, name: string): RangeConfig | undefined {\n    const lowered = name.toLowerCase();\n    if (lowered.includes(\"oxygen\") || lowered.includes(\"spo2\")) {\n      return { low: 92, normal: [95, 100] };\n    }\n    if (lowered.includes(\"respiratory\")) {\n      return { low: 10, high: 24, normal: [12, 20] };\n    }\n    if (lowered.includes(\"resting\") || lowered.includes(\"heart rate\")) {\n      return { low: 45, high: 110, normal: [55, 95] };\n    }\n    if (lowered.includes(\"variability\") || lowered.includes(\"hrv\")) {\n      return { low: 15, normal: [20, 150] };\n    }\n    if (lowered.includes(\"glucose\")) {\n      return { low: 70, high: 180, normal: [80, 140] };\n    }\n    return metric.ranges as RangeConfig | undefined;\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const ranges = resolveZones(metric, this.config?.zones) ?? metric.ranges ?? this.defaultRanges(metric, name);\n    const { status, band } = evaluateRange(value, ranges);\n\n    const statusLabel =\n      band?.label ??\n      (status === \"low\"\n        ? this.localize(\"label.low\")\n        : status === \"high\"\n          ? this.localize(\"label.high\")\n          : status === \"normal\"\n            ? this.localize(\"label.ok\")\n            : \"\");\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n          ${statusLabel\n            ? html`<span class=\"pill status-${status ?? \"normal\"} status-chip\">${statusLabel}</span>`\n            : nothing}\n        </div>\n        <div class=\"value status-${status ?? \"normal\"}\">${text}</div>\n        ${this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n        ${this.config?.history && metric.entity && this.historySeries[metric.entity]\n          ? html`<div>${sparkline(this.historySeries[metric.entity])}</div>`\n          : nothing}\n        ${band?.min !== undefined || band?.max !== undefined\n          ? html`<div class=\"subtle\">\n              ${band.min !== undefined ? `≥ ${band.min}` : \"\"} ${band.max !== undefined\n                ? `≤ ${band.max}`\n                : \"\"}\n            </div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.vitals_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig } from \"../types\";\nimport { formatMinutes, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics } from \"../utils/metrics\";\n\ntype SleepStage = \"asleep\" | \"in_bed\" | \"core\" | \"deep\" | \"rem\" | \"unknown\";\n\nconst STAGE_COLORS: Record<SleepStage, string> = {\n  asleep: \"var(--primary-color)\",\n  in_bed: \"var(--secondary-text-color)\",\n  core: \"var(--accent-color, #5c7cfa)\",\n  deep: \"var(--success-color, #4caf50)\",\n  rem: \"var(--warning-color, #f9a825)\",\n  unknown: \"var(--divider-color, #888)\"\n};\n\n@customElement(\"fitness-sleep-card\")\nexport class FitnessSleepCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n\n  static styles = [\n    cardStyles,\n    css`\n      .summary {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n        gap: 8px;\n        margin-bottom: 8px;\n      }\n      .stage-bar {\n        height: 12px;\n        border-radius: 999px;\n        background: var(--divider-color, rgba(128, 128, 128, 0.3));\n        overflow: hidden;\n        display: flex;\n        margin: 8px 0;\n      }\n      .stage-segment {\n        height: 100%;\n      }\n      .stage-legend {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n        gap: 6px;\n      }\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .swatch {\n        width: 12px;\n        height: 12px;\n        border-radius: 3px;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-sleep-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with sleep stages\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  private stageFromMetric(metric: MetricConfig): SleepStage {\n    if (metric.stage) return metric.stage;\n    const id = (metric.entity ?? \"\").toLowerCase();\n    if (id.includes(\"in_bed\")) return \"in_bed\";\n    if (id.includes(\"sleep_core\")) return \"core\";\n    if (id.includes(\"sleep_deep\")) return \"deep\";\n    if (id.includes(\"sleep_rem\")) return \"rem\";\n    if (id.includes(\"sleep_unknown\")) return \"unknown\";\n    if (id.includes(\"sleep_asleep\")) return \"asleep\";\n    return \"asleep\";\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    const durations: Partial<Record<SleepStage, number>> = {};\n\n    this.config.metrics.forEach((metric) => {\n      const entityId = metric.entity ?? \"\";\n      const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n      const val = parseNumber(entity?.state);\n      if (val === null) return;\n      const stage = this.stageFromMetric(metric);\n      durations[stage] = val;\n    });\n\n    const stageOrder: SleepStage[] = [\"core\", \"deep\", \"rem\", \"unknown\"];\n    const asleepValue =\n      durations.asleep ??\n      stageOrder.reduce((sum, key) => sum + (durations[key] ?? 0), 0);\n    const inBedValue = durations.in_bed ?? asleepValue;\n    const totalForBreakdown = stageOrder.reduce((sum, key) => sum + (durations[key] ?? 0), 0);\n\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.sleep_title\")}</div>\n          ${this.config?.period\n            ? html`<div class=\"subtle\">\n                ${this.localize(`label.period.${this.config.period}`) || this.config.period}\n              </div>`\n            : nothing}\n        </div>\n        <div class=\"summary\">\n          <div>\n            <div class=\"label\">${this.localize(\"label.asleep\")}</div>\n            <div class=\"value\">${asleepValue !== undefined ? formatMinutes(asleepValue) : \"—\"}</div>\n          </div>\n          <div>\n            <div class=\"label\">${this.localize(\"label.in_bed\")}</div>\n            <div class=\"value\">${inBedValue !== undefined ? formatMinutes(inBedValue) : \"—\"}</div>\n          </div>\n        </div>\n        <div class=\"stage-bar\">\n          ${stageOrder\n            .filter((stage) => (durations[stage] ?? 0) > 0)\n            .map((stage) => {\n              const val = durations[stage] ?? 0;\n              const pct = totalForBreakdown > 0 ? (val / totalForBreakdown) * 100 : 0;\n              return html`<div\n                class=\"stage-segment\"\n                style=\"width: ${pct}%; background: ${STAGE_COLORS[stage]}\"\n              ></div>`;\n            })}\n        </div>\n        <div class=\"stage-legend\">\n          ${stageOrder.map((stage) => {\n            const val = durations[stage];\n            const name = this.localize(`label.${stage}`) || stage.toUpperCase();\n            return html`<div class=\"legend-item\">\n              <span class=\"swatch\" style=\"background:${STAGE_COLORS[stage]}\"></span>\n              <div>\n                <div class=\"label\">${name}</div>\n                <div class=\"subtle\">\n                  ${val !== undefined && val !== null ? formatMinutes(val) : \"—\"}\n                </div>\n              </div>\n            </div>`;\n          })}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { FitnessCardBaseConfig, HomeAssistant, MetricConfig } from \"../types\";\nimport { formatTrend, guessMetricName, metricDisplay, parseNumber } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult, fetchHistorySeries } from \"../utils/history\";\nimport { sparkline } from \"../components/sparkline\";\n\n@customElement(\"fitness-body-metrics-card\")\nexport class FitnessBodyMetricsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: FitnessCardBaseConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n  @state() private historySeries: Record<string, number[]> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .trend {\n        display: inline-flex;\n        align-items: center;\n        gap: 4px;\n        font-size: 0.85rem;\n        color: var(--secondary-text-color);\n      }\n      .trend.up {\n        color: var(--success-color, var(--primary-color));\n      }\n      .trend.down {\n        color: var(--error-color, #ef5350);\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-body-metrics-card-editor\");\n  }\n\n  public setConfig(config: FitnessCardBaseConfig): void {\n    if (!config.metrics || !Array.isArray(config.metrics) || config.metrics.length === 0) {\n      throw new Error(\"Add a metrics array with body metrics\");\n    }\n    this.config = { ...config, metrics: normalizeMetrics(config.metrics, config.preset) };\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n      this.loadHistory();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    await Promise.all(\n      this.config.metrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? parseNumber(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private async loadHistory() {\n    if (!this.config || !this.hass || !this.config.history) return;\n    const days = this.config.history_window_days ?? 7;\n    const points = this.config.history_points ?? 24;\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - days);\n    const series: Record<string, number[]> = { ...this.historySeries };\n    await Promise.all(\n      this.config.metrics\n        .filter((m) => m.entity)\n        .map(async (metric) => {\n          const id = metric.entity!;\n          const values = await fetchHistorySeries(this.hass!, id, start, end, points);\n          series[id] = values;\n        })\n    );\n    this.historySeries = series;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private previousValue(entity?: any): number | null {\n    return previousFromEntity(entity);\n  }\n\n  private trendIcon(diff: number): string {\n    if (diff > 0) return \"mdi:arrow-up-bold\";\n    if (diff < 0) return \"mdi:arrow-down-bold\";\n    return \"mdi:minus\";\n  }\n\n  private renderMetric(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const trend = this.trends[metric.entity ?? \"\"];\n    const previous = this.previousValue(entity);\n    const diff =\n      trend?.diff !== undefined\n        ? trend.diff\n        : value !== null && previous !== null\n          ? value - previous\n          : null;\n\n    return html`\n      <div class=\"metric ${this.config?.compact ? \"compact\" : \"\"}\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n        </div>\n        <div class=\"value\">${text}</div>\n        <div class=\"subtle\">\n          ${diff !== null\n            ? html`<span class=\"trend ${diff > 0 ? \"up\" : diff < 0 ? \"down\" : \"\"}\">\n                <ha-icon .icon=${this.trendIcon(diff)}></ha-icon>\n                ${formatTrend(diff, metric.unit_override ?? entity?.attributes?.unit_of_measurement)}\n                (${this.localize(\"label.vs_previous\", {\n                  period: this.localize(`label.period.${getPeriod(this.config?.period)}`) ||\n                    getPeriod(this.config?.period)\n                })})\n              </span>`\n            : html`<span class=\"trend\">${this.localize(\"label.no_previous\")}</span>`}\n        </div>\n        ${this.config?.history && metric.entity && this.historySeries[metric.entity]\n          ? html`<div>${sparkline(this.historySeries[metric.entity])}</div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.body_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config?.period)}`)}</div>\n        </div>\n        <div class=\"metric-grid\">\n          ${this.config.metrics.map((metric) => this.renderMetric(metric))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { HomeAssistant, WorkoutsCardConfig, WorkoutMetricConfig, Period } from \"../types\";\nimport { computeLocalize } from \"../localize\";\nimport { formatMinutes, formatValue, parseNumber } from \"../utils/formatting\";\nimport { getPeriod } from \"../utils/metrics\";\n\ninterface WorkoutValues {\n  duration: number | null;\n  energy: number | null;\n  distance: number | null;\n}\n\n@customElement(\"fitness-workouts-card\")\nexport class FitnessWorkoutsCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: WorkoutsCardConfig;\n\n  static styles = [\n    cardStyles,\n    css`\n      .workout-list {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n      }\n      .row {\n        display: grid;\n        grid-template-columns: 1fr repeat(3, minmax(70px, 100px));\n        gap: 10px;\n        align-items: center;\n      }\n      .header-row {\n        font-weight: 700;\n        color: var(--secondary-text-color);\n      }\n      .total {\n        font-weight: 700;\n      }\n      .value {\n        text-align: right;\n      }\n      .compact .row {\n        grid-template-columns: 1fr repeat(2, minmax(60px, 80px));\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-workouts-card-editor\");\n  }\n\n  public setConfig(config: WorkoutsCardConfig): void {\n    if (!config.workouts || !Array.isArray(config.workouts) || config.workouts.length === 0) {\n      throw new Error(\"Add a workouts array\");\n    }\n    this.config = { ...config, workouts: [...config.workouts] };\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private workoutValues(item: WorkoutMetricConfig): WorkoutValues {\n    const duration = parseNumber(this.hass?.states?.[item.duration_entity ?? \"\"]?.state);\n    const energy = parseNumber(this.hass?.states?.[item.energy_entity ?? \"\"]?.state);\n    const distance = parseNumber(this.hass?.states?.[item.distance_entity ?? \"\"]?.state);\n    return { duration, energy, distance };\n  }\n\n  private renderValue(value: number | null, unit?: string): string {\n    if (unit === \"min\" && value !== null) return formatMinutes(value);\n    return formatValue(value, unit);\n  }\n\n  private totalRow() {\n    if (!this.config) return nothing;\n    const totals: WorkoutValues = { duration: 0, energy: 0, distance: 0 };\n    this.config.workouts.forEach((w) => {\n      const vals = this.workoutValues(w);\n      totals.duration = vals.duration !== null ? (totals.duration ?? 0) + vals.duration : totals.duration;\n      totals.energy = vals.energy !== null ? (totals.energy ?? 0) + vals.energy : totals.energy;\n      totals.distance = vals.distance !== null ? (totals.distance ?? 0) + vals.distance : totals.distance;\n    });\n    return html`\n      <div class=\"row total\">\n        <div>${this.localize(\"label.total\")}</div>\n        <div class=\"value\">${this.renderValue(totals.duration, \"min\")}</div>\n        <div class=\"value\">${this.renderValue(totals.energy, \"kcal\")}</div>\n        ${this.config.workouts.some((w) => w.distance_entity)\n          ? html`<div class=\"value\">${this.renderValue(totals.distance, \"mi\")}</div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  private renderRow(item: WorkoutMetricConfig) {\n    const { duration, energy, distance } = this.workoutValues(item);\n    const showDistance = Boolean(item.distance_entity);\n    return html`\n      <div class=\"row\">\n        <div class=\"label\">\n          ${item.icon ? html`<ha-icon .icon=${item.icon}></ha-icon>` : nothing}\n          <span>${item.name}</span>\n        </div>\n        <div class=\"value\">${this.renderValue(duration, \"min\")}</div>\n        <div class=\"value\">${this.renderValue(energy, \"kcal\")}</div>\n        ${showDistance ? html`<div class=\"value\">${this.renderValue(distance, \"mi\")}</div>` : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card class=${this.config.compact ? \"compact\" : \"\"}>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.workouts_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"workout-list\">\n          <div class=\"row header-row\">\n            <div></div>\n            <div class=\"value\">${this.localize(\"label.duration\")}</div>\n            <div class=\"value\">${this.localize(\"label.energy\")}</div>\n            ${this.config.workouts.some((w) => w.distance_entity)\n              ? html`<div class=\"value\">${this.localize(\"label.distance\")}</div>`\n              : nothing}\n          </div>\n          ${this.totalRow()}\n          ${this.config.workouts.map((w) => this.renderRow(w))}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n","import { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { cardStyles } from \"../styles/shared\";\nimport { HomeAssistant, MetricConfig, OverviewCardConfig } from \"../types\";\nimport { formatTrend, goalValue, guessMetricName, metricDisplay, progressPercent } from \"../utils/formatting\";\nimport { computeLocalize } from \"../localize\";\nimport { normalizeMetrics, getPeriod } from \"../utils/metrics\";\nimport { computeTrend, previousFromEntity, TrendResult, fetchHistorySeries } from \"../utils/history\";\nimport { sparkline } from \"../components/sparkline\";\n\n@customElement(\"fitness-overview-card\")\nexport class FitnessOverviewCard extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n  @state() private config?: OverviewCardConfig;\n  @state() private trends: Record<string, TrendResult> = {};\n  @state() private historySeries: Record<string, number[]> = {};\n\n  static styles = [\n    cardStyles,\n    css`\n      .primary-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n        gap: 12px;\n      }\n      .secondary {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 8px;\n        margin-top: 12px;\n      }\n      .chip-value {\n        font-weight: 700;\n      }\n      .progress-ring {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        background: var(--divider-color);\n        position: relative;\n      }\n      .progress-ring::after {\n        content: \"\";\n        position: absolute;\n        inset: 4px;\n        border-radius: 50%;\n        background: var(--card-background-color, var(--ha-card-background, #1e1e1e));\n      }\n      .progress-fill {\n        position: absolute;\n        inset: 0;\n        border-radius: 50%;\n      }\n    `\n  ];\n\n  static async getConfigElement() {\n    return document.createElement(\"fitness-overview-card-editor\");\n  }\n\n  public setConfig(config: OverviewCardConfig): void {\n    if (!config.primary_metrics || !Array.isArray(config.primary_metrics) || config.primary_metrics.length === 0) {\n      throw new Error(\"Add primary_metrics\");\n    }\n    this.config = {\n      ...config,\n      primary_metrics: normalizeMetrics(config.primary_metrics, config.preset),\n      secondary_metrics: normalizeMetrics(config.secondary_metrics ?? [], config.preset)\n    };\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  protected updated(changed: Map<string, any>) {\n    if ((changed.has(\"hass\") || changed.has(\"config\")) && this.config) {\n      this.loadTrends();\n      this.loadHistory();\n    }\n  }\n\n  private async loadTrends() {\n    if (!this.config || !this.hass) return;\n    const period = getPeriod(this.config.period);\n    const trendMap: Record<string, TrendResult> = { ...this.trends };\n    const allMetrics = [...this.config.primary_metrics, ...(this.config.secondary_metrics ?? [])];\n    await Promise.all(\n      allMetrics.map(async (metric) => {\n        const entityId = metric.entity ?? \"\";\n        const entity = entityId ? this.hass?.states?.[entityId] : undefined;\n        if (period === \"current\") {\n          const current = entity ? Number(entity.state) : null;\n          const previous = previousFromEntity(entity);\n          trendMap[entityId] = {\n            current,\n            previous,\n            diff: current !== null && previous !== null ? current - previous : null,\n            label: period\n          };\n          return;\n        }\n        if (!entityId) {\n          trendMap[entityId] = { current: null, previous: null, diff: null, label: period };\n          return;\n        }\n        const trend = await computeTrend(this.hass!, metric.trend_entity ?? entityId, period);\n        trendMap[entityId] = trend;\n      })\n    );\n    this.trends = trendMap;\n  }\n\n  private async loadHistory() {\n    if (!this.config || !this.hass || !this.config.history) return;\n    const days = this.config.history_window_days ?? 7;\n    const points = this.config.history_points ?? 24;\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - days);\n    const series: Record<string, number[]> = { ...this.historySeries };\n    const metrics = [...this.config.primary_metrics, ...(this.config.secondary_metrics ?? [])];\n    await Promise.all(\n      metrics\n        .filter((m) => m.entity)\n        .map(async (metric) => {\n          const id = metric.entity!;\n          const values = await fetchHistorySeries(this.hass!, id, start, end, points);\n          series[id] = values;\n        })\n    );\n    this.historySeries = series;\n  }\n\n  private localize(key: string, vars?: Record<string, string | number>): string {\n    return computeLocalize(this.hass)(key, vars);\n  }\n\n  private renderTrend(metric: MetricConfig, unit?: string) {\n    if (this.config?.show_trends === false) return nothing;\n    const trend = this.trends[metric.entity ?? \"\"];\n    if (!trend || trend.diff === null) return nothing;\n    const period = getPeriod(this.config?.period);\n    const periodLabel = this.localize(`label.period.${period}`) || period;\n    const compare = this.localize(\"label.vs_previous\", { period: periodLabel });\n    return html`<div class=\"subtle\">\n      ${this.localize(\"label.trend\")} (${compare}): ${formatTrend(trend.diff, unit, metric.decimals)}\n    </div>`;\n  }\n\n  private renderProgressRing(progress?: number) {\n    if (progress === undefined || progress === null) return nothing;\n    const clamped = Math.min(progress, 100);\n    const gradient = `conic-gradient(var(--accent-color, var(--primary-color)) ${clamped}%, var(--divider-color, #ccc) ${clamped}% 100%)`;\n    return html`\n      <div class=\"progress-ring\">\n        <div class=\"progress-fill\" style=\"background:${gradient}\"></div>\n      </div>\n    `;\n  }\n\n  private renderPrimary(metric: MetricConfig) {\n    const { value, text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const goal = goalValue(metric, this.hass, this.config?.goals);\n    const progress = progressPercent(value, goal);\n    const unit = metric.unit_override ?? entity?.attributes?.unit_of_measurement;\n    return html`\n      <div class=\"metric\">\n        <div class=\"label\">\n          ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n          <span>${name}</span>\n          ${this.renderProgressRing(progress ?? undefined)}\n        </div>\n        <div class=\"value\">${text}</div>\n        ${goal !== undefined && progress !== null\n          ? html`<div class=\"subtle\">\n              ${this.localize(\"label.of_goal\", { percent: progress })}\n              • ${this.localize(\"label.goal\")}: ${goal}\n            </div>`\n          : nothing}\n        ${this.renderTrend(metric, unit)}\n        ${this.config?.history && metric.entity && this.historySeries[metric.entity]\n          ? html`<div>${sparkline(this.historySeries[metric.entity], 140, 40)}</div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  private renderSecondary(metric: MetricConfig) {\n    const { text, entity } = metricDisplay(this.hass, metric);\n    const name = guessMetricName(metric, entity);\n    const icon = metric.icon ?? entity?.attributes?.icon;\n    const trend = this.renderTrend(metric, metric.unit_override ?? entity?.attributes?.unit_of_measurement);\n    return html`\n      <div class=\"chip\">\n        ${icon ? html`<ha-icon .icon=${icon}></ha-icon>` : nothing}\n        <span>${name}</span>\n        <span class=\"chip-value\">${text}</span>\n        ${trend}\n        ${this.config?.history && metric.entity && this.historySeries[metric.entity]\n          ? html`<div>${sparkline(this.historySeries[metric.entity], 80, 30)}</div>`\n          : nothing}\n      </div>\n    `;\n  }\n\n  protected render() {\n    if (!this.config) return nothing;\n    return html`\n      <ha-card>\n        <div class=\"header\">\n          <div class=\"title\">${this.config.title ?? this.localize(\"card.overview_title\")}</div>\n          <div class=\"subtle\">${this.localize(`label.period.${getPeriod(this.config.period)}`)}</div>\n        </div>\n        <div class=\"primary-grid\">\n          ${this.config.primary_metrics.map((metric) => this.renderPrimary(metric))}\n        </div>\n        ${this.config.secondary_metrics && this.config.secondary_metrics.length\n          ? html`<div class=\"secondary\">\n              ${this.config.secondary_metrics.map((metric) => this.renderSecondary(metric))}\n            </div>`\n          : nothing}\n      </ha-card>\n    `;\n  }\n}\n","export function fireEvent(node: HTMLElement, type: string, detail?: any) {\n  node.dispatchEvent(new CustomEvent(type, { detail, bubbles: true, composed: true }));\n}\n","import { metricPresets } from \"../presets\";\n\nexport const periodOptions = [\n  { value: \"current\", label: \"Current\" },\n  { value: \"today\", label: \"Today\" },\n  { value: \"7d\", label: \"7 days\" },\n  { value: \"30d\", label: \"30 days\" }\n];\n\nexport const presetOptions = Object.values(metricPresets).map((preset) => ({\n  value: preset.id,\n  label: preset.name\n}));\n\nexport const metricSchema = [\n  { name: \"entity\", selector: { entity: {} } },\n  { name: \"preset\", selector: { select: { options: presetOptions } } },\n  { name: \"name\", selector: { text: {} } },\n  { name: \"icon\", selector: { icon: {} } },\n  { name: \"unit_override\", selector: { text: {} } },\n  { name: \"decimals\", selector: { number: { min: 0, max: 4, mode: \"box\" } } },\n  { name: \"goal\", selector: { number: { min: 0, mode: \"box\" } } },\n  { name: \"goal_entity\", selector: { entity: {} } },\n  { name: \"trend_entity\", selector: { entity: {} } },\n  {\n    name: \"ranges\",\n    schema: [\n      { name: \"low\", selector: { number: { mode: \"box\" } } },\n      { name: \"normal\", selector: { text: {} } },\n      { name: \"high\", selector: { number: { mode: \"box\" } } }\n    ]\n  }\n];\n\nexport const historyFields = [\n  { name: \"history\", selector: { boolean: {} } },\n  { name: \"history_window_days\", selector: { number: { min: 1, max: 60, mode: \"box\" } } },\n  { name: \"history_points\", selector: { number: { min: 4, max: 120, mode: \"box\" } } }\n];\n","import { MetricConfig } from \"../types\";\nimport { metricPresets } from \"../presets\";\n\ninterface Detection {\n  preset: string;\n  entity: string;\n}\n\nconst keywordMap: Record<string, string> = {\n  steps: \"steps\",\n  heart_rate_variability: \"hrv_sdnn\",\n  hrv: \"hrv_sdnn\",\n  heart_rate: \"heart_rate\",\n  resting_heart_rate: \"resting_heart_rate\",\n  oxygen_saturation: \"spo2\",\n  respiratory_rate: \"respiratory_rate\",\n  sleep_asleep: \"asleep\",\n  sleep_in_bed: \"in_bed\",\n  sleep_core: \"sleep_core\",\n  sleep_deep: \"sleep_deep\",\n  sleep_rem: \"sleep_rem\",\n  sleep_unknown: \"sleep_unknown\",\n  weight: \"weight\",\n  bmi: \"bmi\",\n  body_fat: \"body_fat_percentage\",\n  vo2: \"vo2_max\",\n  hydration: \"hydration\",\n  distance_walking_running: \"distance_walk_run\",\n  distance_cycling: \"distance_cycling\",\n  active_energy: \"active_energy\",\n  basal_energy: \"basal_energy\",\n  flights_climbed: \"flights_climbed\",\n  workout_duration: \"workout_generic\",\n  workout_energy: \"workout_generic\"\n};\n\nexport function autoDetectMetrics(hass: any): MetricConfig[] {\n  if (!hass?.states) return [];\n  const matches: Detection[] = [];\n  const entities = Object.entries(hass.states) as [string, any][];\n  entities.forEach(([entityId, entity]) => {\n    const lower = entityId.toLowerCase();\n    for (const key of Object.keys(keywordMap)) {\n      if (lower.includes(key)) {\n        matches.push({ preset: keywordMap[key], entity: entityId });\n        return;\n      }\n    }\n    const unit = entity.attributes?.unit_of_measurement;\n    if (unit === \"bpm\") matches.push({ preset: \"heart_rate\", entity: entityId });\n    if (unit === \"%\") matches.push({ preset: \"spo2\", entity: entityId });\n    if (unit === \"kcal\") matches.push({ preset: \"active_energy\", entity: entityId });\n    if (unit === \"mi\" || unit === \"km\") matches.push({ preset: \"distance_walk_run\", entity: entityId });\n    if (unit === \"ms\") matches.push({ preset: \"hrv_sdnn\", entity: entityId });\n    if (unit === \"mg/dL\") matches.push({ preset: \"glucose\", entity: entityId });\n  });\n\n  const unique: Record<string, MetricConfig> = {};\n  matches.forEach((m) => {\n    if (!unique[m.preset]) {\n      unique[m.preset] = { preset: m.preset, entity: m.entity, name: metricPresets[m.preset]?.name };\n    }\n  });\n  return Object.values(unique);\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions, historyFields } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\n@customElement(\"fitness-activity-summary-card-editor\")\nexport class FitnessActivitySummaryCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const suggestions = autoDetectMetrics(this.hass)\n      .filter((s) =>\n        [\"steps\", \"active_energy\", \"distance_walk_run\", \"flights_climbed\"].includes(s.preset || \"\")\n      )\n      .map((s) => ({ ...s, key: s.preset || s.entity }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => s.key && this._selected[s.key]);\n    if (!accepted.length) return;\n    const merged = [...accepted.map(({ key, ...rest }) => rest), ...(this._config.metrics || [])];\n    const config = { ...this._config, metrics: merged };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-activity-summary-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"activity\", \"vitals\", \"sleep\", \"body\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      ...historyFields,\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions, historyFields } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\n@customElement(\"fitness-vitals-card-editor\")\nexport class FitnessVitalsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const suggestions = autoDetectMetrics(this.hass)\n      .filter((s) =>\n        [\"heart_rate\", \"resting_heart_rate\", \"hrv_sdnn\", \"spo2\", \"respiratory_rate\"].includes(\n          s.preset || \"\"\n        )\n      )\n      .map((s) => ({ ...s, key: s.preset || s.entity }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => s.key && this._selected[s.key]);\n    if (!accepted.length) return;\n    const merged = [...accepted.map(({ key, ...rest }) => rest), ...(this._config.metrics || [])];\n    const config = { ...this._config, metrics: merged };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-vitals-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"vitals\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      ...historyFields,\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions, historyFields } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\n@customElement(\"fitness-sleep-card-editor\")\nexport class FitnessSleepCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const allowed = [\"asleep\", \"in_bed\", \"sleep_core\", \"sleep_deep\", \"sleep_rem\", \"sleep_unknown\"];\n    const suggestions = autoDetectMetrics(this.hass)\n      .filter((s) => allowed.includes(s.preset || \"\"))\n      .map((s) => ({ ...s, key: s.preset || s.entity }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => s.key && this._selected[s.key]);\n    if (!accepted.length) return;\n    const merged = [...accepted.map(({ key, ...rest }) => rest), ...(this._config.metrics || [])];\n    const config = { ...this._config, metrics: merged };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-sleep-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"sleep\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      ...historyFields,\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { FitnessCardBaseConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions, historyFields } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\n@customElement(\"fitness-body-metrics-card-editor\")\nexport class FitnessBodyMetricsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: FitnessCardBaseConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: FitnessCardBaseConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as FitnessCardBaseConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const allowed = [\"weight\", \"bmi\", \"body_fat_percentage\", \"lean_body_mass\", \"vo2_max\"];\n    const suggestions = autoDetectMetrics(this.hass)\n      .filter((s) => allowed.includes(s.preset || \"\"))\n      .map((s) => ({ ...s, key: s.preset || s.entity }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => s.key && this._selected[s.key]);\n    if (!accepted.length) return;\n    const merged = [...accepted.map(({ key, ...rest }) => rest), ...(this._config.metrics || [])];\n    const config = { ...this._config, metrics: merged };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-body-metrics-card\", metrics: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"body\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      ...historyFields,\n      { name: \"metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { WorkoutsCardConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { periodOptions } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\nconst workoutSchema = [\n  { name: \"name\", selector: { text: {} } },\n  { name: \"icon\", selector: { icon: {} } },\n  { name: \"duration_entity\", selector: { entity: {} } },\n  { name: \"energy_entity\", selector: { entity: {} } },\n  { name: \"distance_entity\", selector: { entity: {} } }\n];\n\n@customElement(\"fitness-workouts-card-editor\")\nexport class FitnessWorkoutsCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: WorkoutsCardConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: WorkoutsCardConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as WorkoutsCardConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const suggestions = autoDetectMetrics(this.hass)\n      .filter((s) => (s.preset || \"\").startsWith(\"workout\"))\n      .map((s) => ({ ...s, key: s.preset || s.entity }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => s.key && this._selected[s.key]);\n    if (!accepted.length) return;\n    const workouts = accepted.map((s) => ({\n      name: s.name || s.preset,\n      duration_entity: s.entity\n    }));\n    const config = { ...this._config, workouts: [...workouts, ...(this._config.workouts || [])] };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data = this._config ?? { type: \"custom:fitness-workouts-card\", workouts: [] };\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"workouts\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"workouts\", type: \"array\", schema: workoutSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport { OverviewCardConfig } from \"../types\";\nimport { fireEvent } from \"../utils/events\";\nimport { metricSchema, periodOptions, historyFields } from \"./schemas\";\nimport { autoDetectMetrics } from \"../utils/autodetect\";\nimport { computeLocalize } from \"../localize\";\n\n@customElement(\"fitness-overview-card-editor\")\nexport class FitnessOverviewCardEditor extends LitElement {\n  @property({ attribute: false }) public hass?: any;\n  @state() private _config?: OverviewCardConfig;\n  @state() private _suggestions: any[] = [];\n  @state() private _selected: Record<string, boolean> = {};\n\n  setConfig(config: OverviewCardConfig) {\n    this._config = { ...config };\n  }\n\n  private localize(key: string) {\n    return computeLocalize(this.hass)(key);\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    const config = ev.detail.value as OverviewCardConfig;\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  private _detect() {\n    if (!this.hass) return;\n    const suggestions = autoDetectMetrics(this.hass).map((s) => ({\n      ...s,\n      key: s.preset || s.entity\n    }));\n    const selected: Record<string, boolean> = {};\n    suggestions.forEach((s) => s.key && (selected[s.key] = true));\n    this._suggestions = suggestions;\n    this._selected = selected;\n  }\n\n  private _applySuggestions() {\n    if (!this._config) return;\n    const accepted = this._suggestions.filter((s) => this._selected[s.preset]);\n    if (!accepted.length) return;\n    const config: OverviewCardConfig = {\n      ...this._config,\n      primary_metrics: [...accepted.slice(0, 4), ...(this._config.primary_metrics || [])],\n      secondary_metrics: [\n        ...accepted.slice(4),\n        ...((this._config.secondary_metrics as any[]) || [])\n      ]\n    };\n    this._config = config;\n    fireEvent(this, \"config-changed\", { config });\n  }\n\n  protected render() {\n    if (!this.hass) return null;\n    const data =\n      this._config ??\n      ({ type: \"custom:fitness-overview-card\", primary_metrics: [], secondary_metrics: [] } as OverviewCardConfig);\n    const schema: any[] = [\n      { name: \"title\", selector: { text: {} } },\n      { name: \"preset\", selector: { select: { options: [\"overview\"] } } },\n      { name: \"period\", selector: { select: { options: periodOptions } } },\n      { name: \"compact\", selector: { boolean: {} } },\n      { name: \"show_trends\", selector: { boolean: {} } },\n      ...historyFields,\n      { name: \"primary_metrics\", type: \"array\", schema: metricSchema },\n      { name: \"secondary_metrics\", type: \"array\", schema: metricSchema }\n    ];\n    return html`\n      <div style=\"display:flex; gap:8px; align-items:center; margin-bottom:8px;\">\n        <button @click=${this._detect}>${this.localize(\"action.auto_detect\")}</button>\n        ${this._suggestions.length\n          ? html`<button @click=${this._applySuggestions}>\n              ${this.localize(\"action.apply_suggestions\")}\n            </button>`\n          : \"\"}\n      </div>\n      ${this._suggestions.length\n        ? html`<div>\n            ${this._suggestions.map(\n              (s) => html`<label style=\"display:block;\">\n                <input\n                  type=\"checkbox\"\n                  .checked=${this._selected[s.preset]}\n                  @change=${(e: any) =>\n                    (this._selected = { ...this._selected, [s.preset]: e.target.checked })}\n                />\n                ${s.name || s.preset}: ${s.entity}\n              </label>`\n            )}\n          </div>`\n        : \"\"}\n      <ha-form\n        .hass=${this.hass}\n        .data=${data}\n        .schema=${schema}\n        .computeLabel=${(s: any) => s.name}\n        @value-changed=${this._valueChanged}\n      ></ha-form>\n    `;\n  }\n}\n","import catalog from \"../../data/metric-catalog.json\";\nimport { MetricCategory } from \"../types\";\n\nexport interface MetricCatalogEntry {\n  entity_id: string;\n  friendly_name?: string;\n  unit_of_measurement?: string;\n  device_class?: string | null;\n  state_class?: string | null;\n  icon?: string | null;\n  category: MetricCategory;\n}\n\nexport const metricCatalog: MetricCatalogEntry[] = (catalog as MetricCatalogEntry[]).map(\n  (item) => ({\n    ...item,\n    category: (item.category ?? \"other\") as MetricCategory\n  })\n);\n\nexport function byCategory(category: MetricCategory): MetricCatalogEntry[] {\n  return metricCatalog.filter((entry) => entry.category === category);\n}\n\nexport function findMetric(entityId: string): MetricCatalogEntry | undefined {\n  return metricCatalog.find((entry) => entry.entity_id === entityId);\n}\n","import \"./cards/fitness-activity-summary-card\";\nimport \"./cards/fitness-vitals-card\";\nimport \"./cards/fitness-sleep-card\";\nimport \"./cards/fitness-body-metrics-card\";\nimport \"./cards/fitness-workouts-card\";\nimport \"./cards/fitness-overview-card\";\n\nimport \"./editors/fitness-activity-summary-card-editor\";\nimport \"./editors/fitness-vitals-card-editor\";\nimport \"./editors/fitness-sleep-card-editor\";\nimport \"./editors/fitness-body-metrics-card-editor\";\nimport \"./editors/fitness-workouts-card-editor\";\nimport \"./editors/fitness-overview-card-editor\";\n\nexport * from \"./utils/metric-catalog\";\n\ndeclare global {\n  interface Window {\n    customCards?: Array<{\n      type: string;\n      name: string;\n      description: string;\n    }>;\n  }\n}\n\nfunction registerCard(type: string, name: string, description: string) {\n  if (!window.customCards) window.customCards = [];\n  if (!window.customCards.some((card) => card.type === type)) {\n    window.customCards.push({ type, name, description });\n  }\n}\n\nregisterCard(\n  \"fitness-activity-summary-card\",\n  \"Fitness Activity Summary\",\n  \"Shows configurable activity totals with goals.\"\n);\n\nregisterCard(\n  \"fitness-vitals-card\",\n  \"Fitness Vitals\",\n  \"Displays heart metrics with optional thresholds.\"\n);\n\nregisterCard(\n  \"fitness-sleep-card\",\n  \"Fitness Sleep\",\n  \"Summarises sleep totals and stage breakdown.\"\n);\n\nregisterCard(\n  \"fitness-body-metrics-card\",\n  \"Fitness Body Metrics\",\n  \"Shows body metrics with trend indicators.\"\n);\n\nregisterCard(\"fitness-workouts-card\", \"Fitness Workouts\", \"Summarises workout energy/duration.\");\n\nregisterCard(\"fitness-overview-card\", \"Fitness Overview\", \"Highlights primary and secondary metrics.\");\n"],"names":["t","globalThis","e","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","o","WeakMap","n$3","this","_$cssResult$","Error","cssText","styleSheet","length","get","replaceSync","set","toString","i","reduce","n","c","cssRules","is","defineProperty","getOwnPropertyDescriptor","h","getOwnPropertyNames","r","getOwnPropertySymbols","getPrototypeOf","Object","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","d","u","Boolean","Array","JSON","stringify","Number","parse","f","b","attribute","type","String","converter","reflect","useDefault","hasChanged","metadata","litPropertyMetadata","y$1","HTMLElement","_$Ei","push","observedAttributes","finalize","_$Eh","keys","state","hasOwnProperty","create","wrapped","elementProperties","noAccessor","getPropertyDescriptor","call","requestUpdate","configurable","enumerable","Map","finalized","properties","createProperty","_$Eu","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","constructor","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","_$EO","add","renderRoot","isConnected","hostConnected","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","connectedCallback","disconnectedCallback","hostDisconnected","_$AK","toAttribute","removeAttribute","getPropertyOptions","fromAttribute","_$Ej","hasAttribute","C","_$EP","has","_$Eq","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EM","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","_$ET","y","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","v","_","m","RegExp","g","$","x","_$litType$","strings","values","w","E","for","A","P","createTreeWalker","V","N","lastIndex","exec","test","startsWith","S","parts","el","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","I","L","z","H","tagName","append","data","indexOf","innerHTML","M","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","R","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","k","nextSibling","Z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","T","iterator","insertBefore","O","createTextNode","_$AC","_$AP","remove","element","fill","j","arguments","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","host","handleEvent","B","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","setConnected","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","addInitializer","customElements","define","kind","cardStyles","css","UNAVAILABLE_STATES","parseNumber","value","asString","trim","parsed","isFinite","defaultDecimals","unit","formatMinutes","floor","round","decimals","formatValue","unitOverride","isNaN","displayUnit","precision","rounded","formatTrend","diff","prefix","goalValue","metric","hass","goals","goal","goal_entity","goalState","states","entity","key","preset","cfg","progressPercent","min","evaluateRange","ranges","normalized","bands","hit","find","band","max","severity","status","low","normal","high","metricDisplay","entityId","unit_override","attributes","unit_of_measurement","text","guessMetricName","friendly_name","join","languages","en","es","localize","language","vars","base","entries","acc","token","replace","computeLocalize","locale","metricPresets","steps","id","icon","active_energy","distance_walk_run","distance_cycling","flights_climbed","heart_rate","resting_heart_rate","hrv_sdnn","spo2","respiratory_rate","asleep","in_bed","sleep_core","sleep_deep","sleep_rem","sleep_unknown","weight","bmi","body_fat_percentage","lean_body_mass","vo2_max","glucose","workout_cycling","workout_walking","workout_strength_training","workout_functional_strength","workout_hiit","workout_generic","cardPresets","activity","vitals","sleep","stage","body","workouts","overview","normalizeMetrics","metrics","getPeriod","configPeriod","cache","seriesCache","lastRequest","async","fetchHistory","start","end","toISOString","now","Date","cached","ts","path","response","callApi","series","latest","item","error","computeTrend","period","current","previous","label","prevStart","prevEnd","setHours","setDate","getDate","getTime","previousFromEntity","candidates","previous_state","last_value","prior_value","candidate","fetchHistorySeries","points","bucket","interval","bucketStart","bucketEnd","filter","last_changed","NaN","FitnessActivitySummaryCard","trends","historySeries","getConfigElement","config","getCardSize","changed","loadTrends","loadHistory","trendMap","all","trendEntityId","trend_entity","currentVal","trend","history","days","history_window_days","history_points","show_trends","nothing","periodLabel","compare","html","progress","compact","renderTrend","targetMetrics","match","labels","from","recent","idx","height","title","renderHistoryBars","renderMetric","__decorateClass","property","customElement","defaultZones","sparkline","width","clean","svg","range","step","FitnessVitalsCard","lowered","includes","cardZones","zones_disabled","zones","defaultRanges","statusLabel","STAGE_COLORS","core","deep","rem","unknown","FitnessSleepCard","durations","val","stageFromMetric","stageOrder","asleepValue","sum","inBedValue","totalForBreakdown","toUpperCase","FitnessBodyMetricsCard","previousValue","trendIcon","FitnessWorkoutsCard","duration","duration_entity","energy","energy_entity","distance","distance_entity","totalRow","totals","vals","workoutValues","renderValue","some","showDistance","renderRow","FitnessOverviewCard","primary_metrics","secondary_metrics","allMetrics","clamped","renderProgressRing","percent","renderPrimary","renderSecondary","fireEvent","node","detail","dispatchEvent","CustomEvent","bubbles","composed","periodOptions","metricSchema","selector","select","number","schema","historyFields","boolean","keywordMap","heart_rate_variability","hrv","oxygen_saturation","sleep_asleep","sleep_in_bed","body_fat","vo2","hydration","distance_walking_running","basal_energy","workout_duration","workout_energy","autoDetectMetrics","matches","lower","unique","FitnessActivitySummaryCardEditor","_suggestions","_selected","_config","ev","_detect","suggestions","selected","_applySuggestions","accepted","merged","rest","target","checked","_valueChanged","FitnessVitalsCardEditor","FitnessSleepCardEditor","allowed","FitnessBodyMetricsCardEditor","workoutSchema","FitnessWorkoutsCardEditor","FitnessOverviewCardEditor","metricCatalog","category","byCategory","entry","findMetric","entity_id","registerCard","description","window","customCards","card"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}